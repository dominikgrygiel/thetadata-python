
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../reference/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.6">
    
    
      
        <title>Quickstart - Theta Data Python Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.558e4712.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#quickstart" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Theta Data Python Documentation" class="md-header__button md-logo" aria-label="Theta Data Python Documentation" data-md-component="logo">
      
  <img src="../logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Theta Data Python Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Quickstart
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/ThetaData-API/thetadata-python" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ThetaData-API/thetadata-python
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Theta Data Python Documentation" class="md-nav__button md-logo" aria-label="Theta Data Python Documentation" data-md-component="logo">
      
  <img src="../logo.png" alt="logo">

    </a>
    Theta Data Python Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ThetaData-API/thetadata-python" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ThetaData-API/thetadata-python
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Quickstart
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Quickstart
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#free-data" class="md-nav__link">
    Free data
  </a>
  
    <nav class="md-nav" aria-label="Free data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#end-of-day-stock-data" class="md-nav__link">
    End of day stock data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#end-of-day-option-data" class="md-nav__link">
    End of day option data
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list-roots" class="md-nav__link">
    List roots
  </a>
  
    <nav class="md-nav" aria-label="List roots">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stock-roots" class="md-nav__link">
    Stock roots
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#roots-with-options" class="md-nav__link">
    Roots with options
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#understanding-the-output" class="md-nav__link">
    Understanding the output
  </a>
  
    <nav class="md-nav" aria-label="Understanding the output">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#manipulating-a-dataframe" class="md-nav__link">
    Manipulating a DataFrame
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manipulating-a-series" class="md-nav__link">
    Manipulating a Series
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snapshots" class="md-nav__link">
    Snapshots
  </a>
  
    <nav class="md-nav" aria-label="Snapshots">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#15-minute-delayed-stock-snapshots" class="md-nav__link">
    15-minute delayed stock snapshots
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#real-time-option-snapshots" class="md-nav__link">
    Real-time option snapshots
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#streaming" class="md-nav__link">
    Streaming
  </a>
  
    <nav class="md-nav" aria-label="Streaming">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#preface" class="md-nav__link">
    Preface
  </a>
  
    <nav class="md-nav" aria-label="Preface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition" class="md-nav__link">
    Definition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#responses" class="md-nav__link">
    Responses
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limitations" class="md-nav__link">
    Limitations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-quotes" class="md-nav__link">
    Option Quotes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-trades" class="md-nav__link">
    Option Trades
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#every-option-trade" class="md-nav__link">
    Every Option Trade
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#every-open-interest" class="md-nav__link">
    Every Open Interest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cancelling-streams" class="md-nav__link">
    Cancelling Streams
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-a-connection-lost-to-server" class="md-nav__link">
    Handling a connection lost to server.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#historical-nbbo-quotes" class="md-nav__link">
    Historical NBBO Quotes
  </a>
  
    <nav class="md-nav" aria-label="Historical NBBO Quotes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#preface_1" class="md-nav__link">
    Preface
  </a>
  
    <nav class="md-nav" aria-label="Preface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-interval_size-parameter" class="md-nav__link">
    The interval_size parameter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#be-careful" class="md-nav__link">
    Be careful!
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-are-there-quotes-with-no-bid-or-ask" class="md-nav__link">
    Why are there quotes with no bid or ask?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stock-quotes" class="md-nav__link">
    Stock Quotes
  </a>
  
    <nav class="md-nav" aria-label="Stock Quotes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tick-level-nbbo-quotes" class="md-nav__link">
    Tick-level NBBO quotes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-minute-intervals-nbbo-quotes" class="md-nav__link">
    1-minute intervals NBBO quotes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#historical-option-quotes" class="md-nav__link">
    Historical Option Quotes
  </a>
  
    <nav class="md-nav" aria-label="Historical Option Quotes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tick-level-nbbo-quotes_1" class="md-nav__link">
    Tick-level NBBO quotes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-minute-intervals-nbbo-quotes_1" class="md-nav__link">
    1-minute intervals NBBO quotes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whats-next" class="md-nav__link">
    What's next?
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../reference/" class="md-nav__link">
        Reference
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../explanation/" class="md-nav__link">
        Explanation
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#free-data" class="md-nav__link">
    Free data
  </a>
  
    <nav class="md-nav" aria-label="Free data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#end-of-day-stock-data" class="md-nav__link">
    End of day stock data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#end-of-day-option-data" class="md-nav__link">
    End of day option data
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list-roots" class="md-nav__link">
    List roots
  </a>
  
    <nav class="md-nav" aria-label="List roots">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stock-roots" class="md-nav__link">
    Stock roots
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#roots-with-options" class="md-nav__link">
    Roots with options
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#understanding-the-output" class="md-nav__link">
    Understanding the output
  </a>
  
    <nav class="md-nav" aria-label="Understanding the output">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#manipulating-a-dataframe" class="md-nav__link">
    Manipulating a DataFrame
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manipulating-a-series" class="md-nav__link">
    Manipulating a Series
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snapshots" class="md-nav__link">
    Snapshots
  </a>
  
    <nav class="md-nav" aria-label="Snapshots">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#15-minute-delayed-stock-snapshots" class="md-nav__link">
    15-minute delayed stock snapshots
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#real-time-option-snapshots" class="md-nav__link">
    Real-time option snapshots
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#streaming" class="md-nav__link">
    Streaming
  </a>
  
    <nav class="md-nav" aria-label="Streaming">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#preface" class="md-nav__link">
    Preface
  </a>
  
    <nav class="md-nav" aria-label="Preface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition" class="md-nav__link">
    Definition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#responses" class="md-nav__link">
    Responses
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limitations" class="md-nav__link">
    Limitations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-quotes" class="md-nav__link">
    Option Quotes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-trades" class="md-nav__link">
    Option Trades
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#every-option-trade" class="md-nav__link">
    Every Option Trade
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#every-open-interest" class="md-nav__link">
    Every Open Interest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cancelling-streams" class="md-nav__link">
    Cancelling Streams
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-a-connection-lost-to-server" class="md-nav__link">
    Handling a connection lost to server.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#historical-nbbo-quotes" class="md-nav__link">
    Historical NBBO Quotes
  </a>
  
    <nav class="md-nav" aria-label="Historical NBBO Quotes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#preface_1" class="md-nav__link">
    Preface
  </a>
  
    <nav class="md-nav" aria-label="Preface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-interval_size-parameter" class="md-nav__link">
    The interval_size parameter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#be-careful" class="md-nav__link">
    Be careful!
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-are-there-quotes-with-no-bid-or-ask" class="md-nav__link">
    Why are there quotes with no bid or ask?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stock-quotes" class="md-nav__link">
    Stock Quotes
  </a>
  
    <nav class="md-nav" aria-label="Stock Quotes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tick-level-nbbo-quotes" class="md-nav__link">
    Tick-level NBBO quotes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-minute-intervals-nbbo-quotes" class="md-nav__link">
    1-minute intervals NBBO quotes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#historical-option-quotes" class="md-nav__link">
    Historical Option Quotes
  </a>
  
    <nav class="md-nav" aria-label="Historical Option Quotes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tick-level-nbbo-quotes_1" class="md-nav__link">
    Tick-level NBBO quotes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-minute-intervals-nbbo-quotes_1" class="md-nav__link">
    1-minute intervals NBBO quotes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whats-next" class="md-nav__link">
    What's next?
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  



<h1 id="quickstart">Quickstart</h1>
<p>In this section you'll learn how to get started with thetadata and make simple requests.</p>
<h2 id="installation">Installation</h2>
<ul>
<li>Install Python 3.</li>
<li>Install Java 11 or later. If you are using Windows, this will automatically be done for you. THIS IS REQUIRED TO USE THE API.</li>
<li>Using pip, Python's package manager, open a terminal and run
<code>pip install thetadata</code>
or
<code>python -m pip install thetadata</code></li>
</ul>
<h2 id="free-data">Free data</h2>
<h3 id="end-of-day-stock-data">End of day stock data</h3>
<p>With the API installed, you can now
<code>import thetadata</code> in any Python script you'd like!</p>
<p>Here's how you may make your first <strong>free</strong> stock data request:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">eod.py</label><label for="__tabbed_1_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="kn">from</span> <span class="nn">thetadata</span> <span class="kn">import</span> <span class="n">ThetaClient</span><span class="p">,</span> <span class="n">DateRange</span><span class="p">,</span> <span class="n">StockReqType</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="k">def</span> <span class="nf">end_of_day</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="n">client</span> <span class="o">=</span> <span class="n">ThetaClient</span><span class="p">()</span>  <span class="c1"># No credentials required for free access</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    <span class="c1"># Make any requests for data inside this block. Requests made outside this block won&#39;t run.</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>    <span class="k">with</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">():</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>        <span class="n">out</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_hist_stock</span><span class="p">(</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>            <span class="n">req</span><span class="o">=</span><span class="n">StockReqType</span><span class="o">.</span><span class="n">EOD</span><span class="p">,</span>  <span class="c1"># End of day data</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>            <span class="n">root</span><span class="o">=</span><span class="s2">&quot;AAPL&quot;</span><span class="p">,</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>            <span class="n">date_range</span><span class="o">=</span><span class="n">DateRange</span><span class="p">(</span><span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span> <span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">18</span><span class="p">))</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>        <span class="p">)</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>    <span class="c1"># We are out of the client.connect() block, so we can no longer make requests.</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>    <span class="k">return</span> <span class="n">out</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>    <span class="n">data</span> <span class="o">=</span> <span class="n">end_of_day</span><span class="p">()</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">to_string</span><span class="p">())</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>&gt;<span class="w"> </span>python<span class="w"> </span>eod.py<span class="w">                                                                                                                                                                        </span><span class="w"> </span><span class="m">1</span><span class="w"> </span>✘<span class="w"> </span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">   </span>DataType.OPEN<span class="w">  </span>DataType.HIGH<span class="w">  </span>DataType.LOW<span class="w">  </span>DataType.CLOSE<span class="w">  </span>DataType.VOLUME<span class="w">  </span>DataType.COUNT<span class="w"> </span>DataType.DATE
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="m">0</span><span class="w">         </span><span class="m">149</span>.30<span class="w">       </span><span class="m">166</span>.6500<span class="w">      </span><span class="m">135</span>.3900<span class="w">         </span><span class="m">148</span>.770<span class="w">         </span><span class="m">80889202</span><span class="w">          </span><span class="m">576303</span><span class="w">    </span><span class="m">2022</span>-11-14
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="m">1</span><span class="w">         </span><span class="m">149</span>.51<span class="w">       </span><span class="m">153</span>.5900<span class="w">      </span><span class="m">140</span>.9150<span class="w">         </span><span class="m">149</span>.700<span class="w">         </span><span class="m">96309849</span><span class="w">          </span><span class="m">703679</span><span class="w">    </span><span class="m">2022</span>-11-15
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="m">2</span><span class="w">         </span><span class="m">150</span>.25<span class="w">       </span><span class="m">155</span>.0800<span class="w">      </span><span class="m">138</span>.9800<span class="w">         </span><span class="m">148</span>.980<span class="w">         </span><span class="m">71463364</span><span class="w">          </span><span class="m">472255</span><span class="w">    </span><span class="m">2022</span>-11-16
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="m">3</span><span class="w">         </span><span class="m">149</span>.08<span class="w">       </span><span class="m">159</span>.0588<span class="w">      </span><span class="m">140</span>.2858<span class="w">         </span><span class="m">150</span>.865<span class="w">         </span><span class="m">86759251</span><span class="w">          </span><span class="m">563732</span><span class="w">    </span><span class="m">2022</span>-11-17
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="m">4</span><span class="w">         </span><span class="m">151</span>.00<span class="w">       </span><span class="m">153</span>.3400<span class="w">      </span><span class="m">134</span>.8700<span class="w">         </span><span class="m">150</span>.880<span class="w">         </span><span class="m">84146100</span><span class="w">          </span><span class="m">514111</span><span class="w">    </span><span class="m">2022</span>-11-18
</code></pre></div>
<blockquote>
<p><em>What am I looking at?</em></p>
</blockquote>
</div>
</div>
</div>
<h3 id="end-of-day-option-data">End of day option data</h3>
<p>Here's how you may make your first <strong>free</strong> option data request:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">eod.py</label><label for="__tabbed_2_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="kn">from</span> <span class="nn">thetadata</span> <span class="kn">import</span> <span class="n">ThetaClient</span><span class="p">,</span> <span class="n">OptionReqType</span><span class="p">,</span> <span class="n">OptionRight</span><span class="p">,</span> <span class="n">DateRange</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="k">def</span> <span class="nf">end_of_day</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>    <span class="n">client</span> <span class="o">=</span> <span class="n">ThetaClient</span><span class="p">()</span>  <span class="c1"># No credentials required for free access</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>    <span class="c1"># Make any requests for data inside this block. Requests made outside this block won&#39;t run.</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>    <span class="k">with</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">():</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>        <span class="c1"># Make the request</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>        <span class="n">out</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_hist_option</span><span class="p">(</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>            <span class="n">req</span><span class="o">=</span><span class="n">OptionReqType</span><span class="o">.</span><span class="n">EOD</span><span class="p">,</span>  <span class="c1"># End of day data</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>            <span class="n">root</span><span class="o">=</span><span class="s2">&quot;AAPL&quot;</span><span class="p">,</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>            <span class="n">exp</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>            <span class="n">strike</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a>            <span class="n">right</span><span class="o">=</span><span class="n">OptionRight</span><span class="o">.</span><span class="n">CALL</span><span class="p">,</span>
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a>            <span class="n">date_range</span><span class="o">=</span><span class="n">DateRange</span><span class="p">(</span><span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span> <span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">18</span><span class="p">))</span>
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a>        <span class="p">)</span>
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a>    <span class="c1"># We are out of the client.connect() block, so we can no longer make requests.</span>
<a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a>    <span class="k">return</span> <span class="n">out</span>
<a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a>
<a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a>
<a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a>    <span class="n">data</span> <span class="o">=</span> <span class="n">end_of_day</span><span class="p">()</span>
<a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">to_string</span><span class="p">())</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>&gt;<span class="w"> </span>python<span class="w"> </span>eod.py<span class="w">                                                                                                                                                                        </span><span class="w"> </span><span class="m">1</span><span class="w"> </span>✘<span class="w"> </span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">   </span>DataType.OPEN<span class="w">  </span>DataType.HIGH<span class="w">  </span>DataType.LOW<span class="w">  </span>DataType.CLOSE<span class="w">  </span>DataType.VOLUME<span class="w">  </span>DataType.COUNT<span class="w"> </span>DataType.DATE
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="m">0</span><span class="w">           </span><span class="m">5</span>.50<span class="w">           </span><span class="m">6</span>.15<span class="w">          </span><span class="m">4</span>.75<span class="w">            </span><span class="m">5</span>.10<span class="w">             </span><span class="m">8454</span><span class="w">            </span><span class="m">1155</span><span class="w">    </span><span class="m">2022</span>-11-14
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="m">1</span><span class="w">           </span><span class="m">6</span>.40<span class="w">           </span><span class="m">8</span>.10<span class="w">          </span><span class="m">5</span>.45<span class="w">            </span><span class="m">5</span>.95<span class="w">            </span><span class="m">14153</span><span class="w">            </span><span class="m">1476</span><span class="w">    </span><span class="m">2022</span>-11-15
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="m">2</span><span class="w">           </span><span class="m">5</span>.42<span class="w">           </span><span class="m">5</span>.84<span class="w">          </span><span class="m">4</span>.55<span class="w">            </span><span class="m">5</span>.15<span class="w">            </span><span class="m">10848</span><span class="w">             </span><span class="m">957</span><span class="w">    </span><span class="m">2022</span>-11-16
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="m">3</span><span class="w">           </span><span class="m">4</span>.10<span class="w">           </span><span class="m">6</span>.57<span class="w">          </span><span class="m">3</span>.05<span class="w">            </span><span class="m">6</span>.00<span class="w">             </span><span class="m">5820</span><span class="w">            </span><span class="m">1083</span><span class="w">    </span><span class="m">2022</span>-11-17
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="m">4</span><span class="w">           </span><span class="m">6</span>.95<span class="w">           </span><span class="m">6</span>.95<span class="w">          </span><span class="m">5</span>.57<span class="w">            </span><span class="m">6</span>.11<span class="w">             </span><span class="m">5553</span><span class="w">             </span><span class="m">951</span><span class="w">    </span><span class="m">2022</span>-11-18
</code></pre></div>
<blockquote>
<p><em>What am I looking at?</em></p>
</blockquote>
</div>
</div>
</div>
<h2 id="list-roots">List roots</h2>
<p>A root can be defined as a unique identified for a stock / underlying asset. Common terms also
include: stock symbol, ticker, and underlying.</p>
<h3 id="stock-roots">Stock roots</h3>
<p>This request returns a series of all roots (stock symbols) that are available.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">list_roots.py</label><label for="__tabbed_3_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="kn">from</span> <span class="nn">thetadata</span> <span class="kn">import</span> <span class="n">ThetaClient</span><span class="p">,</span> <span class="n">SecType</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="k">def</span> <span class="nf">get_roots</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>    <span class="n">client</span> <span class="o">=</span> <span class="n">ThetaClient</span><span class="p">()</span>  <span class="c1"># No credentials required for free access</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>    <span class="c1"># Make any requests for data inside this block. Requests made outside this block won&#39;t run.</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>    <span class="k">with</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">():</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>        <span class="n">out</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_roots</span><span class="p">(</span><span class="n">sec</span><span class="o">=</span><span class="n">SecType</span><span class="o">.</span><span class="n">STOCK</span><span class="p">)</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>    <span class="c1"># We are out of the client.connect() block, so we can no longer make requests.</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>    <span class="k">return</span> <span class="n">out</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a>    <span class="n">roots</span> <span class="o">=</span> <span class="n">get_roots</span><span class="p">()</span>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">roots</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>&gt;<span class="w"> </span>python<span class="w"> </span>list_roots.py
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="m">0</span><span class="w">         </span>AAAP
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="m">1</span><span class="w">         </span>AABA
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="m">2</span><span class="w">          </span>AAC
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="m">3</span><span class="w">         </span>AACC
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="m">4</span><span class="w">         </span>AACG
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">     </span>...<span class="w">  </span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="m">9711</span><span class="w">    </span>ZXYZ.A
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="m">9712</span><span class="w">     </span>ZXZZT
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="m">9713</span><span class="w">        </span>ZY
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="m">9714</span><span class="w">      </span>ZYNE
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="m">9715</span><span class="w">      </span>ZYXI
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>Length:<span class="w"> </span><span class="m">9716</span>,<span class="w"> </span>dtype:<span class="w"> </span>object
</code></pre></div>
</div>
</div>
</div>
<h3 id="roots-with-options">Roots with options</h3>
<p>This request returns a series of all roots (stock symbols) that have traded options.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">list_roots.py</label><label for="__tabbed_4_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="kn">from</span> <span class="nn">thetadata</span> <span class="kn">import</span> <span class="n">ThetaClient</span><span class="p">,</span> <span class="n">SecType</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="k">def</span> <span class="nf">get_roots</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>    <span class="n">client</span> <span class="o">=</span> <span class="n">ThetaClient</span><span class="p">()</span>  <span class="c1"># No credentials required for free access</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>    <span class="c1"># Make any requests for data inside this block. Requests made outside this block won&#39;t run.</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>    <span class="k">with</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">():</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>        <span class="n">out</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_roots</span><span class="p">(</span><span class="n">sec</span><span class="o">=</span><span class="n">SecType</span><span class="o">.</span><span class="n">OPTION</span><span class="p">)</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>    <span class="c1"># We are out of the client.connect() block, so we can no longer make requests.</span>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>    <span class="k">return</span> <span class="n">out</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>    <span class="n">roots</span> <span class="o">=</span> <span class="n">get_roots</span><span class="p">()</span>
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">roots</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>&gt;<span class="w"> </span>python<span class="w"> </span>list_roots.py
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="m">0</span><span class="w">           </span>A
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="m">1</span><span class="w">          </span>AA
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="m">2</span><span class="w">        </span>AADI
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="m">3</span><span class="w">        </span>AAIC
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="m">4</span><span class="w">         </span>AAL
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">        </span>...<span class="w">  </span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="m">6240</span><span class="w">     </span>ZYXI
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="m">6241</span><span class="w">    </span>ZYXI1
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="m">6242</span><span class="w">      </span>ZZK
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="m">6243</span><span class="w">      </span>ZZZ
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="m">6244</span><span class="w">     </span>ZZZ1
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>Length:<span class="w"> </span><span class="m">6245</span>,<span class="w"> </span>dtype:<span class="w"> </span>object
</code></pre></div>
</div>
</div>
</div>
<p>Unlike historical data requests, <code>get_roots</code> returns a <em>Series</em>. In the pandas package, a
<code>Series</code> is a one-dimensional array, similar to a Python list.</p>
<h2 id="understanding-the-output">Understanding the output</h2>
<p>The return type of any historical data request is a <code>DataFrame</code>, a core datatype 
in the <strong>pandas</strong> package. To understand what the <code>DataType</code> labels in the <code>DataFrame</code> mean,
please refer to our <a href="https://www.thetadata.net/request-types">request types page</a>.</p>
<blockquote>
<p><a href="https://pandas.pydata.org/">pandas</a> is a fast, powerful, flexible and easy to use open source data
analysis and manipulation tool, built on top of the Python programming language.</p>
</blockquote>
<p>The <a href="https://pandas.pydata.org/docs/user_guide/index.html">official pandas user guide</a>
covers significantly more material than this tutorial. However, a key takeaway is that
pandas operates on two data structures:</p>
<ol>
<li><code>Series</code></li>
<li><code>DataFrame</code></li>
</ol>
<p>A <em>Series</em> is a one-dimensional array, similar to a Python list. A <em>DataFrame</em> is a two-dimensional data structure with rows and columns, similar to a spreadsheet.</p>
<h3 id="manipulating-a-dataframe">Manipulating a <code>DataFrame</code></h3>
<p>The above example returned a <code>DataFrame</code>. Let's see how we can use it to process our data.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">manipulate_df.py</label><label for="__tabbed_5_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="kn">from</span> <span class="nn">thetadata</span> <span class="kn">import</span> <span class="n">DataType</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="kn">from</span> <span class="nn">.stocks.eod</span> <span class="kn">import</span> <span class="n">end_of_day</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>    <span class="c1"># get the data from the previous EOD stock data example</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>    <span class="n">data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">=</span> <span class="n">end_of_day</span><span class="p">()</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>    <span class="c1"># print all datatypes in the response</span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">columns</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>    <span class="c1"># get the first row in the DataFrame (our requested data)</span>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a>    <span class="n">row</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a>
<a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a>    <span class="c1"># print just the open price</span>
<a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a>    <span class="n">open_price</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="n">DataType</span><span class="o">.</span><span class="n">OPEN</span><span class="p">]</span>
<a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">open_price</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a>
<a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a>
<a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>&gt;<span class="w"> </span>python<span class="w"> </span>script.py
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>Index<span class="o">([</span><span class="w">  </span>DataType.OPEN,<span class="w">   </span>DataType.HIGH,<span class="w">    </span>DataType.LOW,<span class="w">  </span>DataType.CLOSE,
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">   </span>DataType.VOLUME,<span class="w">  </span>DataType.COUNT,<span class="w">   </span>DataType.DATE<span class="o">]</span>,
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">  </span><span class="nv">dtype</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="o">)</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="nv">close_price</span><span class="o">=</span><span class="m">149</span>.3
</code></pre></div>
<p>As you can see, the response contains 7 fields (DataFrame <em>columns</em>), and
the close price of the first <em>row</em> of this data (which represents July 18, 2022) is $13.10.</p>
</div>
</div>
</div>
<p>Congratulations, you've processed your first request!</p>
<h3 id="manipulating-a-series">Manipulating a <code>Series</code></h3>
<p>The above stock root list example returned a <code>Series</code>. Let's see how we can use it to 
process our data.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">manipulate_series.py</label><label for="__tabbed_6_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="kn">from</span> <span class="nn">.stocks.list_roots</span> <span class="kn">import</span> <span class="n">get_roots</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>    <span class="c1"># get the result from the previous example</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>    <span class="n">roots</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span> <span class="o">=</span> <span class="n">get_roots</span><span class="p">()</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>    <span class="c1"># Check if a symbol is in the Series</span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>    <span class="n">contains_apple</span> <span class="o">=</span> <span class="s2">&quot;AAPL&quot;</span> <span class="ow">in</span> <span class="n">roots</span><span class="o">.</span><span class="n">values</span>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>    <span class="c1"># Count symbols</span>
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>    <span class="n">count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">roots</span><span class="p">)</span>
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a>    <span class="c1"># Filter symbols to those that start with A</span>
<a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>    <span class="n">filtered</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">roots</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">)]</span>
<a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a>    <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">filtered</span><span class="p">:</span>
<a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a>        <span class="c1"># do something</span>
<a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a>        <span class="k">pass</span>
<a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a>
<a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">contains_apple</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">count</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">filtered</span><span class="p">)</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-10-24" name="__codelineno-10-24" href="#__codelineno-10-24"></a>
<a id="__codelineno-10-25" name="__codelineno-10-25" href="#__codelineno-10-25"></a>
<a id="__codelineno-10-26" name="__codelineno-10-26" href="#__codelineno-10-26"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-10-27" name="__codelineno-10-27" href="#__codelineno-10-27"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>&gt;<span class="w"> </span>python<span class="w"> </span>manipulate_series.py
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="nv">contains_apple</span><span class="o">=</span>True
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="nv">count</span><span class="o">=</span><span class="m">9716</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>len<span class="o">(</span>filtered<span class="o">)=</span><span class="m">965</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="snapshots">Snapshots</h2>
<p>A snapshot is the last quote / trade we have on record. Snapshots are best used when 
executing a trade. This allows you to determine the most recent price.</p>
<h3 id="15-minute-delayed-stock-snapshots">15-minute delayed stock snapshots</h3>
<p>Currently, all of our equities data is 15 minutes delayed. We have plans to upgrade
to real-time equities feeds in the future. Below is an example of a stock snapshot:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">get_last_stk.py</label><label for="__tabbed_7_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="kn">from</span> <span class="nn">thetadata</span> <span class="kn">import</span> <span class="n">ThetaClient</span><span class="p">,</span> <span class="n">StockReqType</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="k">def</span> <span class="nf">get_last</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>    <span class="c1"># Credentials now required because get_last is only available to ThetaData subscribers.</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>    <span class="n">client</span> <span class="o">=</span> <span class="n">ThetaClient</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;MyThetaDataEmail&quot;</span><span class="p">,</span> <span class="n">passwd</span><span class="o">=</span><span class="s2">&quot;MyThetaDataPassword&quot;</span><span class="p">)</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>    <span class="c1"># Make any requests for data inside this block. Requests made outside this block won&#39;t run.</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>    <span class="k">with</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">():</span>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>        <span class="c1"># Request the most recent quote for AAPL stock.</span>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>        <span class="n">out</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_last_stock</span><span class="p">(</span>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>            <span class="n">req</span><span class="o">=</span><span class="n">StockReqType</span><span class="o">.</span><span class="n">QUOTE</span><span class="p">,</span>
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>            <span class="n">root</span><span class="o">=</span><span class="s2">&quot;AAPL&quot;</span><span class="p">,</span>
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>        <span class="p">)</span>
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>    <span class="c1"># We are out of the client.connect() block, so we can no longer make requests.</span>
<a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a>    <span class="k">return</span> <span class="n">out</span>
<a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a>
<a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a>
<a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a>    <span class="n">quote</span> <span class="o">=</span> <span class="n">get_last</span><span class="p">()</span>
<a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">quote</span><span class="o">.</span><span class="n">to_string</span><span class="p">())</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>&gt;<span class="w"> </span>python<span class="w"> </span>get_last.py
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">   </span>DataType.MS_OF_DAY<span class="w">  </span>DataType.BID_SIZE<span class="w">  </span>DataType.BID_CONDITION<span class="w">  </span>DataType.BID<span class="w">  </span>DataType.BID_EXCHANGE<span class="w">  </span>DataType.ASK_SIZE<span class="w">  </span>DataType.ASK_CONDITION<span class="w">  </span>DataType.ASK<span class="w">  </span>DataType.ASK_EXCHANGE<span class="w"> </span>DataType.DATE
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="m">0</span><span class="w">            </span><span class="m">61514177</span><span class="w">                  </span><span class="m">2</span><span class="w">                       </span><span class="m">7</span><span class="w">        </span><span class="m">134</span>.37<span class="w">                      </span><span class="m">0</span><span class="w">                  </span><span class="m">3</span><span class="w">                       </span><span class="m">7</span><span class="w">        </span><span class="m">134</span>.42<span class="w">                      </span><span class="m">0</span><span class="w">    </span><span class="m">2022</span>-12-16
</code></pre></div>
</div>
</div>
</div>
<h3 id="real-time-option-snapshots">Real-time option snapshots</h3>
<p>Let's try a low-latency snapshot request for the most recent option quote available:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="8:2"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">get_last_opt.py</label><label for="__tabbed_8_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="kn">from</span> <span class="nn">thetadata</span> <span class="kn">import</span> <span class="n">ThetaClient</span><span class="p">,</span> <span class="n">OptionReqType</span><span class="p">,</span> <span class="n">OptionRight</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="k">def</span> <span class="nf">get_last</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>    <span class="c1"># Credentials now required because get_last is only available to ThetaData subscribers.</span>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>    <span class="n">client</span> <span class="o">=</span> <span class="n">ThetaClient</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;MyThetaDataEmail&quot;</span><span class="p">,</span> <span class="n">passwd</span><span class="o">=</span><span class="s2">&quot;MyThetaDataPassword&quot;</span><span class="p">)</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a>    <span class="c1"># Make any requests for data inside this block. Requests made outside this block won&#39;t run.</span>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a>    <span class="k">with</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">():</span>
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a>        <span class="c1"># Request the most recent quote for an AAPL $130.00 CALL options expiring on 2022-12-30.</span>
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a>        <span class="n">out</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_last_option</span><span class="p">(</span>
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a>            <span class="n">req</span><span class="o">=</span><span class="n">OptionReqType</span><span class="o">.</span><span class="n">QUOTE</span><span class="p">,</span>
<a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a>            <span class="n">root</span><span class="o">=</span><span class="s2">&quot;AAPL&quot;</span><span class="p">,</span>
<a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a>            <span class="n">exp</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
<a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a>            <span class="n">strike</span><span class="o">=</span><span class="mf">130.00</span><span class="p">,</span>
<a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a>            <span class="n">right</span><span class="o">=</span><span class="n">OptionRight</span><span class="o">.</span><span class="n">CALL</span><span class="p">,</span>
<a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a>        <span class="p">)</span>
<a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a>    <span class="c1"># We are out of the client.connect() block, so we can no longer make requests.</span>
<a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a>    <span class="k">return</span> <span class="n">out</span>
<a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a>
<a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a>
<a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-14-25" name="__codelineno-14-25" href="#__codelineno-14-25"></a>    <span class="n">quote</span> <span class="o">=</span> <span class="n">get_last</span><span class="p">()</span>
<a id="__codelineno-14-26" name="__codelineno-14-26" href="#__codelineno-14-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">quote</span><span class="o">.</span><span class="n">to_string</span><span class="p">())</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>&gt;<span class="w"> </span>python<span class="w"> </span>get_last.py
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="w">   </span>DataType.MS_OF_DAY<span class="w">  </span>DataType.BID_SIZE<span class="w">  </span>DataType.BID_CONDITION<span class="w">  </span>DataType.BID<span class="w">  </span>DataType.BID_EXCHANGE<span class="w">  </span>DataType.ASK_SIZE<span class="w">  </span>DataType.ASK_CONDITION<span class="w">  </span>DataType.ASK<span class="w">  </span>DataType.ASK_EXCHANGE<span class="w"> </span>DataType.DATE
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="m">0</span><span class="w">            </span><span class="m">57599990</span><span class="w">                  </span><span class="m">1</span><span class="w">                       </span><span class="m">1</span><span class="w">          </span><span class="m">6</span>.05<span class="w">                     </span><span class="m">50</span><span class="w">                 </span><span class="m">63</span><span class="w">                      </span><span class="m">46</span><span class="w">          </span><span class="m">6</span>.55<span class="w">                     </span><span class="m">50</span><span class="w">    </span><span class="m">2022</span>-12-16
</code></pre></div>
</div>
</div>
</div>
<h2 id="streaming">Streaming</h2>
<h3 id="preface">Preface</h3>
<h4 id="definition">Definition</h4>
<p>Streaming is defined as receiving continuous market data updates throughout 
the trading day. It is much more performant when compared to snapshots.</p>
<h4 id="responses">Responses</h4>
<p>You must implement a callback method as shown in the first example below. Each time a 
<code>StreamMsg</code> is received, this method will get called. A <code>StreamMsg</code> has a <code>StreamMsgType</code>, which
can be used to determine the purpose of the message.</p>
<h4 id="limitations">Limitations</h4>
<p>The Pro tier has the ability to request a trade stream for every option contract in existence and is able to 
request up to 20K quote streams. The Standard tier can request 10K quote streams and 20K trade streams.
Other tiers do not have access to streaming at this time.</p>
<h3 id="option-quotes">Option Quotes</h3>
<p>Below requests to receive continuous updates for quote for an AAPL option contract. Notice 
that these options are probably expired, so you may need to change the expiration date.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="9:2"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><input id="__tabbed_9_2" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">trade_streaming.py</label><label for="__tabbed_9_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="kn">from</span> <span class="nn">thetadata</span> <span class="kn">import</span> <span class="n">ThetaClient</span><span class="p">,</span> <span class="n">OptionRight</span><span class="p">,</span> <span class="n">StreamMsg</span><span class="p">,</span> <span class="n">StreamMsgType</span><span class="p">,</span> <span class="n">StreamResponseType</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="k">def</span> <span class="nf">streaming</span><span class="p">():</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>    <span class="c1"># Credentials now required because streaming is only available to ThetaData Standard &amp; Pro subscribers.</span>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>    <span class="n">client</span> <span class="o">=</span> <span class="n">ThetaClient</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;MyThetaDataEmail&quot;</span><span class="p">,</span> <span class="n">passwd</span><span class="o">=</span><span class="s2">&quot;MyThetaDataPassword&quot;</span><span class="p">)</span>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>    <span class="n">client</span><span class="o">.</span><span class="n">connect_stream</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>  <span class="c1"># You can stop streaming by calling client.close_stream</span>
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>    <span class="c1"># This contract is likely expired! Replace it with a contract that isn&#39;t expired</span>
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>    <span class="n">req_id</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">req_quote_stream_opt</span><span class="p">(</span><span class="s2">&quot;AAPL&quot;</span><span class="p">,</span> <span class="n">date</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">21</span><span class="p">),</span> <span class="mi">170</span><span class="p">,</span> <span class="n">OptionRight</span><span class="o">.</span><span class="n">CALL</span><span class="p">)</span>
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a>    <span class="c1"># Verify that the request to stream was successful.</span>
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a>    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="n">req_id</span><span class="p">)</span>
<a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a>    <span class="k">if</span> <span class="n">response</span> <span class="o">==</span> <span class="n">StreamResponseType</span><span class="o">.</span><span class="n">SUBSCRIBED</span><span class="p">:</span>
<a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The request to stream option quotes was successful.&#39;</span><span class="p">)</span>
<a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a>    <span class="k">elif</span> <span class="n">response</span> <span class="o">==</span> <span class="n">StreamResponseType</span><span class="o">.</span><span class="n">INVALID_PERMS</span><span class="p">:</span>
<a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Invalid permissions to stream option quotes. Theta Data Options Standard or Pro account required.&#39;</span><span class="p">)</span>
<a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a>    <span class="k">elif</span> <span class="n">response</span> <span class="o">==</span> <span class="n">StreamResponseType</span><span class="o">.</span><span class="n">MAX_STREAMS_REACHED</span><span class="p">:</span>
<a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;You have reached your limit for the amount of option contracts you can stream quotes for.&#39;</span><span class="p">)</span>
<a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-16-23" name="__codelineno-16-23" href="#__codelineno-16-23"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Unexpected stream response: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
<a id="__codelineno-16-24" name="__codelineno-16-24" href="#__codelineno-16-24"></a>
<a id="__codelineno-16-25" name="__codelineno-16-25" href="#__codelineno-16-25"></a>
<a id="__codelineno-16-26" name="__codelineno-16-26" href="#__codelineno-16-26"></a><span class="c1"># User generated method that gets called each time a message from the stream arrives.</span>
<a id="__codelineno-16-27" name="__codelineno-16-27" href="#__codelineno-16-27"></a><span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">msg</span><span class="p">:</span> <span class="n">StreamMsg</span><span class="p">):</span>
<a id="__codelineno-16-28" name="__codelineno-16-28" href="#__codelineno-16-28"></a>    <span class="n">msg</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">type</span>
<a id="__codelineno-16-29" name="__codelineno-16-29" href="#__codelineno-16-29"></a>
<a id="__codelineno-16-30" name="__codelineno-16-30" href="#__codelineno-16-30"></a>    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">StreamMsgType</span><span class="o">.</span><span class="n">QUOTE</span><span class="p">:</span>
<a id="__codelineno-16-31" name="__codelineno-16-31" href="#__codelineno-16-31"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;---------------------------------------------------------------------------&#39;</span><span class="p">)</span>
<a id="__codelineno-16-32" name="__codelineno-16-32" href="#__codelineno-16-32"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;con:    &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="o">.</span><span class="n">contract</span><span class="o">.</span><span class="n">to_string</span><span class="p">())</span>
<a id="__codelineno-16-33" name="__codelineno-16-33" href="#__codelineno-16-33"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;quote:  &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="o">.</span><span class="n">quote</span><span class="o">.</span><span class="n">to_string</span><span class="p">())</span>
<a id="__codelineno-16-34" name="__codelineno-16-34" href="#__codelineno-16-34"></a>
<a id="__codelineno-16-35" name="__codelineno-16-35" href="#__codelineno-16-35"></a>
<a id="__codelineno-16-36" name="__codelineno-16-36" href="#__codelineno-16-36"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-16-37" name="__codelineno-16-37" href="#__codelineno-16-37"></a>    <span class="n">streaming</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>&gt;<span class="w"> </span>python<span class="w"> </span>trade_streaming.py
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>---------------------------------------------------------------------------
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>con:<span class="w">    </span>root:<span class="w"> </span>AAPL<span class="w"> </span>isOption:<span class="w"> </span>True<span class="w"> </span>exp:<span class="w"> </span><span class="m">2023</span>-07-21<span class="w"> </span>strike:<span class="w"> </span><span class="m">170</span>.0<span class="w"> </span>isCall:<span class="w"> </span>True
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>quote:<span class="w">  </span>ms_of_day:<span class="w"> </span><span class="m">57061764</span><span class="w"> </span>bid_size:<span class="w"> </span><span class="m">202</span><span class="w"> </span>bid_exchange:<span class="w"> </span>EDGX<span class="w"> </span>bid_price:<span class="w"> </span><span class="m">6</span>.35<span class="w"> </span>bid_condition:<span class="w"> </span>NATIONAL_BBO<span class="w"> </span>ask_size:<span class="w"> </span><span class="m">742</span><span class="w"> </span>ask_exchange:<span class="w"> </span>C2OX<span class="w"> </span>ask_price:<span class="w"> </span><span class="m">6</span>.45<span class="w"> </span>ask_condition:<span class="w"> </span>NATIONAL_BBO<span class="w"> </span>date:<span class="w"> </span><span class="m">2023</span>-04-21
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>---------------------------------------------------------------------------
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>con:<span class="w">    </span>root:<span class="w"> </span>AAPL<span class="w"> </span>isOption:<span class="w"> </span>True<span class="w"> </span>exp:<span class="w"> </span><span class="m">2023</span>-07-21<span class="w"> </span>strike:<span class="w"> </span><span class="m">170</span>.0<span class="w"> </span>isCall:<span class="w"> </span>True
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>quote:<span class="w">  </span>ms_of_day:<span class="w"> </span><span class="m">57061816</span><span class="w"> </span>bid_size:<span class="w"> </span><span class="m">202</span><span class="w"> </span>bid_exchange:<span class="w"> </span>EDGX<span class="w"> </span>bid_price:<span class="w"> </span><span class="m">6</span>.35<span class="w"> </span>bid_condition:<span class="w"> </span>NATIONAL_BBO<span class="w"> </span>ask_size:<span class="w"> </span><span class="m">742</span><span class="w"> </span>ask_exchange:<span class="w"> </span>C2OX<span class="w"> </span>ask_price:<span class="w"> </span><span class="m">6</span>.45<span class="w"> </span>ask_condition:<span class="w"> </span>NATIONAL_BBO<span class="w"> </span>date:<span class="w"> </span><span class="m">2023</span>-04-21
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>---------------------------------------------------------------------------
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>con:<span class="w">    </span>root:<span class="w"> </span>AAPL<span class="w"> </span>isOption:<span class="w"> </span>True<span class="w"> </span>exp:<span class="w"> </span><span class="m">2023</span>-07-21<span class="w"> </span>strike:<span class="w"> </span><span class="m">170</span>.0<span class="w"> </span>isCall:<span class="w"> </span>True
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a>quote:<span class="w">  </span>ms_of_day:<span class="w"> </span><span class="m">57061974</span><span class="w"> </span>bid_size:<span class="w"> </span><span class="m">202</span><span class="w"> </span>bid_exchange:<span class="w"> </span>EDGX<span class="w"> </span>bid_price:<span class="w"> </span><span class="m">6</span>.35<span class="w"> </span>bid_condition:<span class="w"> </span>NATIONAL_BBO<span class="w"> </span>ask_size:<span class="w"> </span><span class="m">742</span><span class="w"> </span>ask_exchange:<span class="w"> </span>C2OX<span class="w"> </span>ask_price:<span class="w"> </span><span class="m">6</span>.45<span class="w"> </span>ask_condition:<span class="w"> </span>NATIONAL_BBO<span class="w"> </span>date:<span class="w"> </span><span class="m">2023</span>-04-21
<a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a>---------------------------------------------------------------------------
<a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a>con:<span class="w">    </span>root:<span class="w"> </span>AAPL<span class="w"> </span>isOption:<span class="w"> </span>True<span class="w"> </span>exp:<span class="w"> </span><span class="m">2023</span>-07-21<span class="w"> </span>strike:<span class="w"> </span><span class="m">170</span>.0<span class="w"> </span>isCall:<span class="w"> </span>True
<a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a>quote:<span class="w">  </span>ms_of_day:<span class="w"> </span><span class="m">57061974</span><span class="w"> </span>bid_size:<span class="w"> </span><span class="m">254</span><span class="w"> </span>bid_exchange:<span class="w"> </span>C2OX<span class="w"> </span>bid_price:<span class="w"> </span><span class="m">6</span>.35<span class="w"> </span>bid_condition:<span class="w"> </span>NATIONAL_BBO<span class="w"> </span>ask_size:<span class="w"> </span><span class="m">742</span><span class="w"> </span>ask_exchange:<span class="w"> </span>C2OX<span class="w"> </span>ask_price:<span class="w"> </span><span class="m">6</span>.45<span class="w"> </span>ask_condition:<span class="w"> </span>NATIONAL_BBO<span class="w"> </span>date:<span class="w"> </span><span class="m">2023</span>-04-21
<a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a>---------------------------------------------------------------------------
<a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a>con:<span class="w">    </span>root:<span class="w"> </span>AAPL<span class="w"> </span>isOption:<span class="w"> </span>True<span class="w"> </span>exp:<span class="w"> </span><span class="m">2023</span>-07-21<span class="w"> </span>strike:<span class="w"> </span><span class="m">170</span>.0<span class="w"> </span>isCall:<span class="w"> </span>True
<a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a>quote:<span class="w">  </span>ms_of_day:<span class="w"> </span><span class="m">57062025</span><span class="w"> </span>bid_size:<span class="w"> </span><span class="m">322</span><span class="w"> </span>bid_exchange:<span class="w"> </span>C2OX<span class="w"> </span>bid_price:<span class="w"> </span><span class="m">6</span>.35<span class="w"> </span>bid_condition:<span class="w"> </span>NATIONAL_BBO<span class="w"> </span>ask_size:<span class="w"> </span><span class="m">742</span><span class="w"> </span>ask_exchange:<span class="w"> </span>C2OX<span class="w"> </span>ask_price:<span class="w"> </span><span class="m">6</span>.45<span class="w"> </span>ask_condition:<span class="w"> </span>NATIONAL_BBO<span class="w"> </span>date:<span class="w"> </span><span class="m">2023</span>-04-21
<a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a>---------------------------------------------------------------------------
</code></pre></div>
</div>
</div>
</div>
<h3 id="option-trades">Option Trades</h3>
<p>Below requests to receive continuous updates for trades for a NVDA option contract. Notice 
that these options are probably expired, so you may need to change the expiration date.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="10:2"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><input id="__tabbed_10_2" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="__tabbed_10_1">trade_streaming.py</label><label for="__tabbed_10_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="kn">from</span> <span class="nn">thetadata</span> <span class="kn">import</span> <span class="n">ThetaClient</span><span class="p">,</span> <span class="n">OptionRight</span><span class="p">,</span> <span class="n">StreamMsg</span><span class="p">,</span> <span class="n">StreamMsgType</span><span class="p">,</span> <span class="n">StreamResponseType</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="k">def</span> <span class="nf">streaming</span><span class="p">():</span>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>    <span class="c1"># Credentials now required because streaming is only available to ThetaData Standard &amp; Pro subscribers.</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>    <span class="n">client</span> <span class="o">=</span> <span class="n">ThetaClient</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;MyThetaDataEmail&quot;</span><span class="p">,</span> <span class="n">passwd</span><span class="o">=</span><span class="s2">&quot;MyThetaDataPassword&quot;</span><span class="p">)</span>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>    <span class="n">client</span><span class="o">.</span><span class="n">connect_stream</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>  <span class="c1"># You can stop streaming by calling client.close_stream</span>
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>    <span class="c1"># This contract is likely expired! Replace it with a contract that isn&#39;t expired</span>
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a>    <span class="n">req_id</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">req_trade_stream_opt</span><span class="p">(</span><span class="s2">&quot;NVDA&quot;</span><span class="p">,</span> <span class="n">date</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">),</span> <span class="mi">150</span><span class="p">,</span> <span class="n">OptionRight</span><span class="o">.</span><span class="n">CALL</span><span class="p">)</span>
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a>
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a>    <span class="c1"># Verify that the request to stream was successful.</span>
<a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a>    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="n">req_id</span><span class="p">)</span>
<a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a>    <span class="k">if</span> <span class="n">response</span> <span class="o">==</span> <span class="n">StreamResponseType</span><span class="o">.</span><span class="n">SUBSCRIBED</span><span class="p">:</span>
<a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The request to stream option trades was successful.&#39;</span><span class="p">)</span>
<a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a>    <span class="k">elif</span> <span class="n">response</span> <span class="o">==</span> <span class="n">StreamResponseType</span><span class="o">.</span><span class="n">INVALID_PERMS</span><span class="p">:</span>
<a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Invalid permissions to stream option trades. Theta Data Options Standard or Pro account required.&#39;</span><span class="p">)</span>
<a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a>    <span class="k">elif</span> <span class="n">response</span> <span class="o">==</span> <span class="n">StreamResponseType</span><span class="o">.</span><span class="n">MAX_STREAMS_REACHED</span><span class="p">:</span>
<a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;You have reached your limit for the amount of option contracts you can stream trades for.&#39;</span><span class="p">)</span>
<a id="__codelineno-18-22" name="__codelineno-18-22" href="#__codelineno-18-22"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-18-23" name="__codelineno-18-23" href="#__codelineno-18-23"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Unexpected stream response: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
<a id="__codelineno-18-24" name="__codelineno-18-24" href="#__codelineno-18-24"></a>
<a id="__codelineno-18-25" name="__codelineno-18-25" href="#__codelineno-18-25"></a>
<a id="__codelineno-18-26" name="__codelineno-18-26" href="#__codelineno-18-26"></a><span class="c1"># User generated method that gets called each time a message from the stream arrives.</span>
<a id="__codelineno-18-27" name="__codelineno-18-27" href="#__codelineno-18-27"></a><span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">msg</span><span class="p">:</span> <span class="n">StreamMsg</span><span class="p">):</span>
<a id="__codelineno-18-28" name="__codelineno-18-28" href="#__codelineno-18-28"></a>    <span class="n">msg</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">type</span>
<a id="__codelineno-18-29" name="__codelineno-18-29" href="#__codelineno-18-29"></a>
<a id="__codelineno-18-30" name="__codelineno-18-30" href="#__codelineno-18-30"></a>    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">StreamMsgType</span><span class="o">.</span><span class="n">TRADE</span><span class="p">:</span>
<a id="__codelineno-18-31" name="__codelineno-18-31" href="#__codelineno-18-31"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;---------------------------------------------------------------------------&#39;</span><span class="p">)</span>
<a id="__codelineno-18-32" name="__codelineno-18-32" href="#__codelineno-18-32"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;con:                         &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="o">.</span><span class="n">contract</span><span class="o">.</span><span class="n">to_string</span><span class="p">())</span>
<a id="__codelineno-18-33" name="__codelineno-18-33" href="#__codelineno-18-33"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;trade:                       &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="o">.</span><span class="n">trade</span><span class="o">.</span><span class="n">to_string</span><span class="p">())</span>
<a id="__codelineno-18-34" name="__codelineno-18-34" href="#__codelineno-18-34"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;last quote at time of trade: &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="o">.</span><span class="n">quote</span><span class="o">.</span><span class="n">to_string</span><span class="p">())</span>
<a id="__codelineno-18-35" name="__codelineno-18-35" href="#__codelineno-18-35"></a>
<a id="__codelineno-18-36" name="__codelineno-18-36" href="#__codelineno-18-36"></a>
<a id="__codelineno-18-37" name="__codelineno-18-37" href="#__codelineno-18-37"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-18-38" name="__codelineno-18-38" href="#__codelineno-18-38"></a>    <span class="n">streaming</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>&gt;<span class="w"> </span>python<span class="w"> </span>trade_streaming.py
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>---------------------------------------------------------------------------
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>con:<span class="w">                         </span>root:<span class="w"> </span>MSFT<span class="w"> </span>isOption:<span class="w"> </span>True<span class="w"> </span>exp:<span class="w"> </span><span class="m">2023</span>-06-16<span class="w"> </span>strike:<span class="w"> </span><span class="m">185</span>.0<span class="w"> </span>isCall:<span class="w"> </span>False
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>trade:<span class="w">                       </span>ms_of_day:<span class="w"> </span><span class="m">54448612</span><span class="w"> </span>sequence:<span class="w"> </span><span class="m">3464894509</span><span class="w"> </span>size:<span class="w"> </span><span class="m">2</span><span class="w"> </span>condition:<span class="w"> </span>AUTO_EXECUTION<span class="w"> </span>price:<span class="w"> </span><span class="m">4</span>.95<span class="w"> </span>exchange:<span class="w">  </span>date:<span class="w"> </span><span class="m">2022</span>-12-27
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>last<span class="w"> </span>quote<span class="w"> </span>at<span class="w"> </span><span class="nb">time</span><span class="w"> </span>of<span class="w"> </span>trade:<span class="w"> </span>ms_of_day:<span class="w"> </span><span class="m">54448612</span><span class="w"> </span>bid_size:<span class="w"> </span><span class="m">2</span><span class="w"> </span>bid_exchange:<span class="w">  </span>bid_price:<span class="w"> </span><span class="m">4</span>.95<span class="w"> </span>bid_condition:<span class="w"> </span>NATIONAL_BBO<span class="w"> </span>ask_size:<span class="w"> </span><span class="m">27</span><span class="w"> </span>ask_exchange:<span class="w"> </span>XBOS<span class="w"> </span>ask_price:<span class="w"> </span><span class="m">5</span>.05<span class="w"> </span>ask_condition:<span class="w"> </span>NATIONAL_BBO<span class="w"> </span>date:<span class="w"> </span><span class="m">2022</span>-12-27
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>---------------------------------------------------------------------------
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>con:<span class="w">                         </span>root:<span class="w"> </span>MSFT<span class="w"> </span>isOption:<span class="w"> </span>True<span class="w"> </span>exp:<span class="w"> </span><span class="m">2023</span>-06-16<span class="w"> </span>strike:<span class="w"> </span><span class="m">185</span>.0<span class="w"> </span>isCall:<span class="w"> </span>False
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>trade:<span class="w">                       </span>ms_of_day:<span class="w"> </span><span class="m">54448614</span><span class="w"> </span>sequence:<span class="w"> </span><span class="m">3464894620</span><span class="w"> </span>size:<span class="w"> </span><span class="m">2</span><span class="w"> </span>condition:<span class="w"> </span>INTERMARKET_SWEEP<span class="w"> </span>price:<span class="w"> </span><span class="m">4</span>.95<span class="w"> </span>exchange:<span class="w">  </span>date:<span class="w"> </span><span class="m">2022</span>-12-27
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>last<span class="w"> </span>quote<span class="w"> </span>at<span class="w"> </span><span class="nb">time</span><span class="w"> </span>of<span class="w"> </span>trade:<span class="w"> </span>ms_of_day:<span class="w"> </span><span class="m">54448613</span><span class="w"> </span>bid_size:<span class="w"> </span><span class="m">1178</span><span class="w"> </span>bid_exchange:<span class="w">  </span>bid_price:<span class="w"> </span><span class="m">4</span>.95<span class="w"> </span>bid_condition:<span class="w"> </span>NATIONAL_BBO<span class="w"> </span>ask_size:<span class="w"> </span><span class="m">27</span><span class="w"> </span>ask_exchange:<span class="w"> </span>XBOS<span class="w"> </span>ask_price:<span class="w"> </span><span class="m">5</span>.05<span class="w"> </span>ask_condition:<span class="w"> </span>NATIONAL_BBO<span class="w"> </span>date:<span class="w"> </span><span class="m">2022</span>-12-27
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>---------------------------------------------------------------------------
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>con:<span class="w">                         </span>root:<span class="w"> </span>UUP<span class="w"> </span>isOption:<span class="w"> </span>True<span class="w"> </span>exp:<span class="w"> </span><span class="m">2023</span>-01-27<span class="w"> </span>strike:<span class="w"> </span><span class="m">28</span>.5<span class="w"> </span>isCall:<span class="w"> </span>True
<a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a>trade:<span class="w">                       </span>ms_of_day:<span class="w"> </span><span class="m">46725445</span><span class="w"> </span>sequence:<span class="w"> </span><span class="m">1876543798</span><span class="w"> </span>size:<span class="w"> </span><span class="m">55</span><span class="w"> </span>condition:<span class="w"> </span>AUTO_EXECUTION<span class="w"> </span>price:<span class="w"> </span><span class="m">0</span>.23<span class="w"> </span>exchange:<span class="w">  </span>date:<span class="w"> </span><span class="m">2022</span>-12-27
<a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a>last<span class="w"> </span>quote<span class="w"> </span>at<span class="w"> </span><span class="nb">time</span><span class="w"> </span>of<span class="w"> </span>trade:<span class="w"> </span>ms_of_day:<span class="w"> </span><span class="m">46725445</span><span class="w"> </span>bid_size:<span class="w"> </span><span class="m">1</span><span class="w"> </span>bid_exchange:<span class="w"> </span>XNMS<span class="w"> </span>bid_price:<span class="w"> </span><span class="m">0</span>.23<span class="w"> </span>bid_condition:<span class="w"> </span>NATIONAL_BBO<span class="w"> </span>ask_size:<span class="w"> </span><span class="m">55</span><span class="w"> </span>ask_exchange:<span class="w">  </span>ask_price:<span class="w"> </span><span class="m">0</span>.23<span class="w"> </span>ask_condition:<span class="w"> </span>NATIONAL_BBO<span class="w"> </span>date:<span class="w"> </span><span class="m">2022</span>-12-27
<a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a>---------------------------------------------------------------------------
<a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a>con:<span class="w">                         </span>root:<span class="w"> </span>UNM<span class="w"> </span>isOption:<span class="w"> </span>True<span class="w"> </span>exp:<span class="w"> </span><span class="m">2023</span>-03-17<span class="w"> </span>strike:<span class="w"> </span><span class="m">42</span>.5<span class="w"> </span>isCall:<span class="w"> </span>True
<a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a>trade:<span class="w">                       </span>ms_of_day:<span class="w"> </span><span class="m">46725454</span><span class="w"> </span>sequence:<span class="w"> </span><span class="m">1876544125</span><span class="w"> </span>size:<span class="w"> </span><span class="m">1</span><span class="w"> </span>condition:<span class="w"> </span>AUTO_EXECUTION<span class="w"> </span>price:<span class="w"> </span><span class="m">1</span>.95<span class="w"> </span>exchange:<span class="w"> </span>XNMS<span class="w"> </span>date:<span class="w"> </span><span class="m">2022</span>-12-27
<a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a>last<span class="w"> </span>quote<span class="w"> </span>at<span class="w"> </span><span class="nb">time</span><span class="w"> </span>of<span class="w"> </span>trade:<span class="w"> </span>ms_of_day:<span class="w"> </span><span class="m">46725454</span><span class="w"> </span>bid_size:<span class="w"> </span><span class="m">33</span><span class="w"> </span>bid_exchange:<span class="w"> </span>XBOS<span class="w"> </span>bid_price:<span class="w"> </span><span class="m">1</span>.85<span class="w"> </span>bid_condition:<span class="w"> </span>NATIONAL_BBO<span class="w"> </span>ask_size:<span class="w"> </span><span class="m">2</span><span class="w"> </span>ask_exchange:<span class="w"> </span>XMIO<span class="w"> </span>ask_price:<span class="w"> </span><span class="m">2</span>.0<span class="w"> </span>ask_condition:<span class="w"> </span>NATIONAL_BBO<span class="w"> </span>date:<span class="w"> </span><span class="m">2022</span>-12-27
<a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a>---------------------------------------------------------------------------
</code></pre></div>
</div>
</div>
</div>
<h3 id="every-option-trade">Every Option Trade</h3>
<p>Below requests to receive continuous updates for every option trade. This method is only
available to PRO subscribers.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="11:2"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><input id="__tabbed_11_2" name="__tabbed_11" type="radio" /><div class="tabbed-labels"><label for="__tabbed_11_1">trade_streaming_full.py</label><label for="__tabbed_11_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="kn">from</span> <span class="nn">thetadata</span> <span class="kn">import</span> <span class="n">ThetaClient</span><span class="p">,</span> <span class="n">StreamMsg</span><span class="p">,</span> <span class="n">StreamMsgType</span><span class="p">,</span> <span class="n">StreamResponseType</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="k">def</span> <span class="nf">streaming</span><span class="p">():</span>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>    <span class="c1"># Credentials now required because streaming is only available to ThetaData Standard &amp; Pro subscribers.</span>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>    <span class="n">client</span> <span class="o">=</span> <span class="n">ThetaClient</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;MyThetaDataEmail&quot;</span><span class="p">,</span> <span class="n">passwd</span><span class="o">=</span><span class="s2">&quot;MyThetaDataPassword&quot;</span><span class="p">)</span>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>    <span class="n">client</span><span class="o">.</span><span class="n">connect_stream</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>  <span class="c1"># You can stop streaming by calling client.close_stream</span>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>    <span class="n">req_id</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">req_full_trade_stream_opt</span><span class="p">()</span>  <span class="c1"># Requests every option trade (async).</span>
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a>
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>    <span class="c1"># Verify that the request to stream was successful.</span>
<a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a>    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="n">req_id</span><span class="p">)</span>
<a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a>    <span class="k">if</span> <span class="n">response</span> <span class="o">==</span> <span class="n">StreamResponseType</span><span class="o">.</span><span class="n">SUBSCRIBED</span><span class="p">:</span>
<a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Request to stream full trades successful.&#39;</span><span class="p">)</span>
<a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a>    <span class="k">elif</span> <span class="n">response</span> <span class="o">==</span> <span class="n">StreamResponseType</span><span class="o">.</span><span class="n">INVALID_PERMS</span><span class="p">:</span>
<a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Invalid permissions to stream full trades. Theta Data Options Pro account required.&#39;</span><span class="p">)</span>
<a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-20-18" name="__codelineno-20-18" href="#__codelineno-20-18"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Unexpected stream response: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
<a id="__codelineno-20-19" name="__codelineno-20-19" href="#__codelineno-20-19"></a>
<a id="__codelineno-20-20" name="__codelineno-20-20" href="#__codelineno-20-20"></a>
<a id="__codelineno-20-21" name="__codelineno-20-21" href="#__codelineno-20-21"></a><span class="c1"># User generated method that gets called each time a message from the stream arrives.</span>
<a id="__codelineno-20-22" name="__codelineno-20-22" href="#__codelineno-20-22"></a><span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">msg</span><span class="p">:</span> <span class="n">StreamMsg</span><span class="p">):</span>
<a id="__codelineno-20-23" name="__codelineno-20-23" href="#__codelineno-20-23"></a>    <span class="n">msg</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">type</span>
<a id="__codelineno-20-24" name="__codelineno-20-24" href="#__codelineno-20-24"></a>
<a id="__codelineno-20-25" name="__codelineno-20-25" href="#__codelineno-20-25"></a>    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">StreamMsgType</span><span class="o">.</span><span class="n">TRADE</span><span class="p">:</span>
<a id="__codelineno-20-26" name="__codelineno-20-26" href="#__codelineno-20-26"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;---------------------------------------------------------------------------&#39;</span><span class="p">)</span>
<a id="__codelineno-20-27" name="__codelineno-20-27" href="#__codelineno-20-27"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;con:                         &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="o">.</span><span class="n">contract</span><span class="o">.</span><span class="n">to_string</span><span class="p">())</span>
<a id="__codelineno-20-28" name="__codelineno-20-28" href="#__codelineno-20-28"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;trade:                       &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="o">.</span><span class="n">trade</span><span class="o">.</span><span class="n">to_string</span><span class="p">())</span>
<a id="__codelineno-20-29" name="__codelineno-20-29" href="#__codelineno-20-29"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;last quote at time of trade: &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="o">.</span><span class="n">quote</span><span class="o">.</span><span class="n">to_string</span><span class="p">())</span>
<a id="__codelineno-20-30" name="__codelineno-20-30" href="#__codelineno-20-30"></a>
<a id="__codelineno-20-31" name="__codelineno-20-31" href="#__codelineno-20-31"></a>
<a id="__codelineno-20-32" name="__codelineno-20-32" href="#__codelineno-20-32"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-20-33" name="__codelineno-20-33" href="#__codelineno-20-33"></a>    <span class="n">streaming</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>&gt;<span class="w"> </span>python<span class="w"> </span>trade_streaming_full.py
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>---------------------------------------------------------------------------
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>con:<span class="w">                         </span>root:<span class="w"> </span>SPY<span class="w"> </span>isOption:<span class="w"> </span>True<span class="w"> </span>exp:<span class="w"> </span><span class="m">2023</span>-01-03<span class="w"> </span>strike:<span class="w"> </span><span class="m">387</span>.0<span class="w"> </span>isCall:<span class="w"> </span>True
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>trade:<span class="w">                       </span>ms_of_day:<span class="w"> </span><span class="m">45506758</span><span class="w"> </span>sequence:<span class="w"> </span><span class="m">2502262221</span><span class="w"> </span>size:<span class="w"> </span><span class="m">23</span><span class="w"> </span>condition:<span class="w"> </span>AUTO_EXECUTION<span class="w"> </span>price:<span class="w"> </span><span class="m">1</span>.56<span class="w"> </span>exchange:<span class="w"> </span>BATS<span class="w"> </span>date:<span class="w"> </span><span class="m">2022</span>-12-27
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>last<span class="w"> </span>quote<span class="w"> </span>at<span class="w"> </span><span class="nb">time</span><span class="w"> </span>of<span class="w"> </span>trade:<span class="w"> </span>ms_of_day:<span class="w"> </span><span class="m">45506758</span><span class="w"> </span>bid_size:<span class="w"> </span><span class="m">159</span><span class="w"> </span>bid_exchange:<span class="w"> </span>C2OX<span class="w"> </span>bid_price:<span class="w"> </span><span class="m">1</span>.55<span class="w"> </span>bid_condition:<span class="w"> </span>NATIONAL_BBO<span class="w"> </span>ask_size:<span class="w"> </span><span class="m">422</span><span class="w"> </span>ask_exchange:<span class="w"> </span>MCRY<span class="w"> </span>ask_price:<span class="w"> </span><span class="m">1</span>.57<span class="w"> </span>ask_condition:<span class="w"> </span>NATIONAL_BBO<span class="w"> </span>date:<span class="w"> </span><span class="m">2022</span>-12-27
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>---------------------------------------------------------------------------
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>con:<span class="w">                         </span>root:<span class="w"> </span>NEE<span class="w"> </span>isOption:<span class="w"> </span>True<span class="w"> </span>exp:<span class="w"> </span><span class="m">2023</span>-03-17<span class="w"> </span>strike:<span class="w"> </span><span class="m">82</span>.5<span class="w"> </span>isCall:<span class="w"> </span>False
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>trade:<span class="w">                       </span>ms_of_day:<span class="w"> </span><span class="m">52558559</span><span class="w"> </span>sequence:<span class="w"> </span><span class="m">3375727498</span><span class="w"> </span>size:<span class="w"> </span><span class="m">1</span><span class="w"> </span>condition:<span class="w"> </span>AUTO_EXECUTION<span class="w"> </span>price:<span class="w"> </span><span class="m">3</span>.5<span class="w"> </span>exchange:<span class="w"> </span>XCBO<span class="w"> </span>date:<span class="w"> </span><span class="m">2022</span>-12-27
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a>last<span class="w"> </span>quote<span class="w"> </span>at<span class="w"> </span><span class="nb">time</span><span class="w"> </span>of<span class="w"> </span>trade:<span class="w"> </span>ms_of_day:<span class="w"> </span><span class="m">52558559</span><span class="w"> </span>bid_size:<span class="w"> </span><span class="m">1266</span><span class="w"> </span>bid_exchange:<span class="w"> </span>XPHL<span class="w"> </span>bid_price:<span class="w"> </span><span class="m">3</span>.4<span class="w"> </span>bid_condition:<span class="w"> </span>NATIONAL_BBO<span class="w"> </span>ask_size:<span class="w"> </span><span class="m">270</span><span class="w"> </span>ask_exchange:<span class="w"> </span>XPHL<span class="w"> </span>ask_price:<span class="w"> </span><span class="m">3</span>.6<span class="w"> </span>ask_condition:<span class="w"> </span>NATIONAL_BBO<span class="w"> </span>date:<span class="w"> </span><span class="m">2022</span>-12-27
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a>---------------------------------------------------------------------------
<a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a>con:<span class="w">                         </span>root:<span class="w"> </span>TSLA<span class="w"> </span>isOption:<span class="w"> </span>True<span class="w"> </span>exp:<span class="w"> </span><span class="m">2023</span>-01-27<span class="w"> </span>strike:<span class="w"> </span><span class="m">95</span>.0<span class="w"> </span>isCall:<span class="w"> </span>False
<a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a>trade:<span class="w">                       </span>ms_of_day:<span class="w"> </span><span class="m">46432515</span><span class="w"> </span>sequence:<span class="w"> </span><span class="m">2064836636</span><span class="w"> </span>size:<span class="w"> </span><span class="m">1</span><span class="w"> </span>condition:<span class="w"> </span>AUTO_EXECUTION<span class="w"> </span>price:<span class="w"> </span><span class="m">5</span>.15<span class="w"> </span>exchange:<span class="w"> </span>ARCX<span class="w"> </span>date:<span class="w"> </span><span class="m">2022</span>-12-27
<a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a>last<span class="w"> </span>quote<span class="w"> </span>at<span class="w"> </span><span class="nb">time</span><span class="w"> </span>of<span class="w"> </span>trade:<span class="w"> </span>ms_of_day:<span class="w"> </span><span class="m">46432515</span><span class="w"> </span>bid_size:<span class="w"> </span><span class="m">852</span><span class="w"> </span>bid_exchange:<span class="w"> </span>EDGX<span class="w"> </span>bid_price:<span class="w"> </span><span class="m">5</span>.1<span class="w"> </span>bid_condition:<span class="w"> </span>NATIONAL_BBO<span class="w"> </span>ask_size:<span class="w"> </span><span class="m">1</span><span class="w"> </span>ask_exchange:<span class="w"> </span>ARCX<span class="w"> </span>ask_price:<span class="w"> </span><span class="m">5</span>.15<span class="w"> </span>ask_condition:<span class="w"> </span>NATIONAL_BBO<span class="w"> </span>date:<span class="w"> </span><span class="m">2022</span>-12-27
<a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a>---------------------------------------------------------------------------
<a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a>con:<span class="w">                         </span>root:<span class="w"> </span>USO<span class="w"> </span>isOption:<span class="w"> </span>True<span class="w"> </span>exp:<span class="w"> </span><span class="m">2023</span>-01-06<span class="w"> </span>strike:<span class="w"> </span><span class="m">80</span>.0<span class="w"> </span>isCall:<span class="w"> </span>False
<a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a>trade:<span class="w">                       </span>ms_of_day:<span class="w"> </span><span class="m">46432592</span><span class="w"> </span>sequence:<span class="w"> </span><span class="m">1863359037</span><span class="w"> </span>size:<span class="w"> </span><span class="m">1</span><span class="w"> </span>condition:<span class="w"> </span>SINGLE_LEG_AUCTION_NON_ISO<span class="w"> </span>price:<span class="w"> </span><span class="m">9</span>.8<span class="w"> </span>exchange:<span class="w"> </span>XMIO<span class="w"> </span>date:<span class="w"> </span><span class="m">2022</span>-12-27
<a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a>last<span class="w"> </span>quote<span class="w"> </span>at<span class="w"> </span><span class="nb">time</span><span class="w"> </span>of<span class="w"> </span>trade:<span class="w"> </span>ms_of_day:<span class="w"> </span><span class="m">46429598</span><span class="w"> </span>bid_size:<span class="w"> </span><span class="m">39</span><span class="w"> </span>bid_exchange:<span class="w"> </span>XBOS<span class="w"> </span>bid_price:<span class="w"> </span><span class="m">9</span>.55<span class="w"> </span>bid_condition:<span class="w"> </span>NATIONAL_BBO<span class="w"> </span>ask_size:<span class="w"> </span><span class="m">39</span><span class="w"> </span>ask_exchange:<span class="w"> </span>XBOS<span class="w"> </span>ask_price:<span class="w"> </span><span class="m">10</span>.05<span class="w"> </span>ask_condition:<span class="w"> </span>NATIONAL_BBO<span class="w"> </span>date:<span class="w"> </span><span class="m">2022</span>-12-27
<a id="__codelineno-21-18" name="__codelineno-21-18" href="#__codelineno-21-18"></a>---------------------------------------------------------------------------
</code></pre></div>
</div>
</div>
</div>
<h3 id="every-open-interest">Every Open Interest</h3>
<p>Below requests to receive continuous updates for every option open interest. This method is only
available to PRO subscribers. Open Interest is generally reported at 06:30 ET. It is generally not updated during
the trading day.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="12:2"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><input id="__tabbed_12_2" name="__tabbed_12" type="radio" /><div class="tabbed-labels"><label for="__tabbed_12_1">open_interest_streaming.py</label><label for="__tabbed_12_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="kn">from</span> <span class="nn">thetadata</span> <span class="kn">import</span> <span class="n">ThetaClient</span><span class="p">,</span> <span class="n">StreamMsg</span><span class="p">,</span> <span class="n">StreamMsgType</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="k">def</span> <span class="nf">streaming</span><span class="p">():</span>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>    <span class="c1"># Credentials now required because get_last is only available to ThetaData Standard &amp; Pro subscribers.</span>
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>    <span class="n">client</span> <span class="o">=</span> <span class="n">ThetaClient</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;MyThetaDataEmail&quot;</span><span class="p">,</span> <span class="n">passwd</span><span class="o">=</span><span class="s2">&quot;MyThetaDataPassword&quot;</span><span class="p">)</span>
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>
<a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>    <span class="n">client</span><span class="o">.</span><span class="n">connect_stream</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>  <span class="c1"># You can stop streaming by calling client.close_stream</span>
<a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>    <span class="n">client</span><span class="o">.</span><span class="n">req_full_open_interest_stream</span><span class="p">()</span>  <span class="c1"># requests every option open interest update</span>
<a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a>
<a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a>
<a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="c1"># User generated method that gets called each time a message from the stream arrives.</span>
<a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">msg</span><span class="p">:</span> <span class="n">StreamMsg</span><span class="p">):</span>
<a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a>    <span class="n">msg</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">type</span>
<a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a>
<a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a>    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">StreamMsgType</span><span class="o">.</span><span class="n">OPEN_INTEREST</span><span class="p">:</span>
<a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;con:&#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="o">.</span><span class="n">contract</span><span class="o">.</span><span class="n">to_string</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; open_interest: &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="o">.</span><span class="n">open_interest</span><span class="o">.</span><span class="n">to_string</span><span class="p">())</span>
<a id="__codelineno-22-18" name="__codelineno-22-18" href="#__codelineno-22-18"></a>
<a id="__codelineno-22-19" name="__codelineno-22-19" href="#__codelineno-22-19"></a>
<a id="__codelineno-22-20" name="__codelineno-22-20" href="#__codelineno-22-20"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-22-21" name="__codelineno-22-21" href="#__codelineno-22-21"></a>    <span class="n">streaming</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>&gt;<span class="w"> </span>python<span class="w"> </span>open_interest_streaming.py
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>con:root:<span class="w"> </span>ZROZ<span class="w"> </span>isOption:<span class="w"> </span>True<span class="w"> </span>exp:<span class="w"> </span><span class="m">2023</span>-03-17<span class="w"> </span>strike:<span class="w"> </span><span class="m">98</span>.0<span class="w"> </span>isCall:<span class="w"> </span>True<span class="w"> </span>open_interest:<span class="w"> </span>open_interest:<span class="w"> </span><span class="m">51</span><span class="w"> </span>date:<span class="w"> </span><span class="m">2022</span>-12-23
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>con:root:<span class="w"> </span>XOM<span class="w"> </span>isOption:<span class="w"> </span>True<span class="w"> </span>exp:<span class="w"> </span><span class="m">2025</span>-01-17<span class="w"> </span>strike:<span class="w"> </span><span class="m">97</span>.5<span class="w"> </span>isCall:<span class="w"> </span>False<span class="w"> </span>open_interest:<span class="w"> </span>open_interest:<span class="w"> </span><span class="m">130</span><span class="w"> </span>date:<span class="w"> </span><span class="m">2022</span>-12-23
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>con:root:<span class="w"> </span>XOP<span class="w"> </span>isOption:<span class="w"> </span>True<span class="w"> </span>exp:<span class="w"> </span><span class="m">2025</span>-01-17<span class="w"> </span>strike:<span class="w"> </span><span class="m">100</span>.0<span class="w"> </span>isCall:<span class="w"> </span>True<span class="w"> </span>open_interest:<span class="w"> </span>open_interest:<span class="w"> </span><span class="m">79</span><span class="w"> </span>date:<span class="w"> </span><span class="m">2022</span>-12-23
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>con:root:<span class="w"> </span>WSO<span class="w"> </span>isOption:<span class="w"> </span>True<span class="w"> </span>exp:<span class="w"> </span><span class="m">2023</span>-05-19<span class="w"> </span>strike:<span class="w"> </span><span class="m">370</span>.0<span class="w"> </span>isCall:<span class="w"> </span>False<span class="w"> </span>open_interest:<span class="w"> </span>open_interest:<span class="w"> </span><span class="m">0</span><span class="w"> </span>date:<span class="w"> </span><span class="m">2022</span>-12-23
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>con:root:<span class="w"> </span>XOM<span class="w"> </span>isOption:<span class="w"> </span>True<span class="w"> </span>exp:<span class="w"> </span><span class="m">2023</span>-03-17<span class="w"> </span>strike:<span class="w"> </span><span class="m">135</span>.0<span class="w"> </span>isCall:<span class="w"> </span>False<span class="w"> </span>open_interest:<span class="w"> </span>open_interest:<span class="w"> </span><span class="m">51</span><span class="w"> </span>date:<span class="w"> </span><span class="m">2022</span>-12-23
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>con:root:<span class="w"> </span>XOP<span class="w"> </span>isOption:<span class="w"> </span>True<span class="w"> </span>exp:<span class="w"> </span><span class="m">2025</span>-01-17<span class="w"> </span>strike:<span class="w"> </span><span class="m">210</span>.0<span class="w"> </span>isCall:<span class="w"> </span>True<span class="w"> </span>open_interest:<span class="w"> </span>open_interest:<span class="w"> </span><span class="m">15</span><span class="w"> </span>date:<span class="w"> </span><span class="m">2022</span>-12-23
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a>con:root:<span class="w"> </span>XOP<span class="w"> </span>isOption:<span class="w"> </span>True<span class="w"> </span>exp:<span class="w"> </span><span class="m">2025</span>-01-17<span class="w"> </span>strike:<span class="w"> </span><span class="m">160</span>.0<span class="w"> </span>isCall:<span class="w"> </span>True<span class="w"> </span>open_interest:<span class="w"> </span>open_interest:<span class="w"> </span><span class="m">14</span><span class="w"> </span>date:<span class="w"> </span><span class="m">2022</span>-12-23
</code></pre></div>
</div>
</div>
</div>
<h3 id="cancelling-streams">Cancelling Streams</h3>
<p>You can cancel any stream you previously subscribed to by using the remove stream methods.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="13:1"><input checked="checked" id="__tabbed_13_1" name="__tabbed_13" type="radio" /><div class="tabbed-labels"><label for="__tabbed_13_1">cancel_streams.py</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="kn">from</span> <span class="nn">thetadata</span> <span class="kn">import</span> <span class="n">ThetaClient</span><span class="p">,</span> <span class="n">OptionRight</span><span class="p">,</span> <span class="n">StreamMsg</span><span class="p">,</span> <span class="n">StreamMsgType</span>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="k">def</span> <span class="nf">streaming</span><span class="p">():</span>
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>    <span class="c1"># Credentials now required because get_last is only available to ThetaData Standard &amp; Pro subscribers.</span>
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>    <span class="n">client</span> <span class="o">=</span> <span class="n">ThetaClient</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;MyThetaDataEmail&quot;</span><span class="p">,</span> <span class="n">passwd</span><span class="o">=</span><span class="s2">&quot;MyThetaDataPassword&quot;</span><span class="p">)</span>
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>    <span class="n">client</span><span class="o">.</span><span class="n">connect_stream</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>  <span class="c1"># You can stop streaming by calling client.close_stream</span>
<a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>    <span class="c1"># Subscribes to a stream</span>
<a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a>    <span class="n">client</span><span class="o">.</span><span class="n">req_trade_stream_opt</span><span class="p">(</span><span class="s2">&quot;NVDA&quot;</span><span class="p">,</span> <span class="n">date</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">),</span> <span class="mi">150</span><span class="p">,</span> <span class="n">OptionRight</span><span class="o">.</span><span class="n">CALL</span><span class="p">)</span>
<a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a>
<a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a>    <span class="c1"># Unsubscribes from the stream</span>
<a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a>    <span class="n">client</span><span class="o">.</span><span class="n">remove_trade_stream_opt</span><span class="p">(</span><span class="s2">&quot;NVDA&quot;</span><span class="p">,</span> <span class="n">date</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">),</span> <span class="mi">150</span><span class="p">,</span> <span class="n">OptionRight</span><span class="o">.</span><span class="n">CALL</span><span class="p">)</span>
<a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a>
<a id="__codelineno-24-17" name="__codelineno-24-17" href="#__codelineno-24-17"></a>    <span class="n">client</span><span class="o">.</span><span class="n">req_full_trade_stream_opt</span><span class="p">()</span>  <span class="c1"># Subscribes to every option trade.</span>
<a id="__codelineno-24-18" name="__codelineno-24-18" href="#__codelineno-24-18"></a>
<a id="__codelineno-24-19" name="__codelineno-24-19" href="#__codelineno-24-19"></a>    <span class="n">client</span><span class="o">.</span><span class="n">remove_full_trade_stream_opt</span><span class="p">()</span>  <span class="c1"># Unsubscribes from the full option trade stream.</span>
<a id="__codelineno-24-20" name="__codelineno-24-20" href="#__codelineno-24-20"></a>
<a id="__codelineno-24-21" name="__codelineno-24-21" href="#__codelineno-24-21"></a>
<a id="__codelineno-24-22" name="__codelineno-24-22" href="#__codelineno-24-22"></a><span class="c1"># User generated method that gets called each time a message from the stream arrives.</span>
<a id="__codelineno-24-23" name="__codelineno-24-23" href="#__codelineno-24-23"></a><span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">msg</span><span class="p">:</span> <span class="n">StreamMsg</span><span class="p">):</span>
<a id="__codelineno-24-24" name="__codelineno-24-24" href="#__codelineno-24-24"></a>    <span class="n">msg</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">type</span>
<a id="__codelineno-24-25" name="__codelineno-24-25" href="#__codelineno-24-25"></a>
<a id="__codelineno-24-26" name="__codelineno-24-26" href="#__codelineno-24-26"></a>    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">StreamMsgType</span><span class="o">.</span><span class="n">TRADE</span><span class="p">:</span>
<a id="__codelineno-24-27" name="__codelineno-24-27" href="#__codelineno-24-27"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;---------------------------------------------------------------------------&#39;</span><span class="p">)</span>
<a id="__codelineno-24-28" name="__codelineno-24-28" href="#__codelineno-24-28"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;con:                         &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="o">.</span><span class="n">contract</span><span class="o">.</span><span class="n">to_string</span><span class="p">())</span>
<a id="__codelineno-24-29" name="__codelineno-24-29" href="#__codelineno-24-29"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;trade:                       &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="o">.</span><span class="n">trade</span><span class="o">.</span><span class="n">to_string</span><span class="p">())</span>
<a id="__codelineno-24-30" name="__codelineno-24-30" href="#__codelineno-24-30"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;last quote at time of trade: &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="o">.</span><span class="n">quote</span><span class="o">.</span><span class="n">to_string</span><span class="p">())</span>
<a id="__codelineno-24-31" name="__codelineno-24-31" href="#__codelineno-24-31"></a>
<a id="__codelineno-24-32" name="__codelineno-24-32" href="#__codelineno-24-32"></a>
<a id="__codelineno-24-33" name="__codelineno-24-33" href="#__codelineno-24-33"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-24-34" name="__codelineno-24-34" href="#__codelineno-24-34"></a>    <span class="n">streaming</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="handling-a-connection-lost-to-server">Handling a connection lost to server.</h3>
<p>If the connection between the API and ThetaData servers is lost, there is a <code>DISCONNECTED</code> callback. 
Once the reconnection has been reestablished, there is a <code>RECONNECTED</code> callback.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="14:1"><input checked="checked" id="__tabbed_14_1" name="__tabbed_14" type="radio" /><div class="tabbed-labels"><label for="__tabbed_14_1">connection_msgs.py</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="kn">from</span> <span class="nn">thetadata</span> <span class="kn">import</span> <span class="n">ThetaClient</span><span class="p">,</span> <span class="n">OptionRight</span><span class="p">,</span> <span class="n">StreamMsg</span><span class="p">,</span> <span class="n">StreamMsgType</span>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="k">def</span> <span class="nf">streaming</span><span class="p">():</span>
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a>    <span class="c1"># Credentials now required because get_last is only available to ThetaData Standard &amp; Pro subscribers.</span>
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a>    <span class="n">client</span> <span class="o">=</span> <span class="n">ThetaClient</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;MyThetaDataEmail&quot;</span><span class="p">,</span> <span class="n">passwd</span><span class="o">=</span><span class="s2">&quot;MyThetaDataPassword&quot;</span><span class="p">)</span>
<a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a>
<a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a>    <span class="n">client</span><span class="o">.</span><span class="n">connect_stream</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>  <span class="c1"># You can stop streaming by calling client.close_stream</span>
<a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a>    <span class="n">client</span><span class="o">.</span><span class="n">req_full_trade_stream_opt</span><span class="p">()</span>  <span class="c1"># Subscribes to every option trade.</span>
<a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a>
<a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a>
<a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a><span class="c1"># User generated method that gets called each time a message from the stream arrives.</span>
<a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a><span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">msg</span><span class="p">:</span> <span class="n">StreamMsg</span><span class="p">):</span>
<a id="__codelineno-25-16" name="__codelineno-25-16" href="#__codelineno-25-16"></a>    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">StreamMsgType</span><span class="o">.</span><span class="n">DISCONNECTED</span><span class="p">:</span>
<a id="__codelineno-25-17" name="__codelineno-25-17" href="#__codelineno-25-17"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Lost connection to Theta Data servers&#39;</span><span class="p">)</span>
<a id="__codelineno-25-18" name="__codelineno-25-18" href="#__codelineno-25-18"></a>    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">StreamMsgType</span><span class="o">.</span><span class="n">STREAM_DEAD</span><span class="p">:</span>
<a id="__codelineno-25-19" name="__codelineno-25-19" href="#__codelineno-25-19"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Lost connection to Theta Terminal, which is likely due the terminal being forcibly closed&#39;</span><span class="p">)</span>
<a id="__codelineno-25-20" name="__codelineno-25-20" href="#__codelineno-25-20"></a>    <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">StreamMsgType</span><span class="o">.</span><span class="n">RECONNECTED</span><span class="p">:</span>
<a id="__codelineno-25-21" name="__codelineno-25-21" href="#__codelineno-25-21"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The terminal has reconnected to Theta Data. You need to resubscribe to all streams.&#39;</span><span class="p">)</span>
<a id="__codelineno-25-22" name="__codelineno-25-22" href="#__codelineno-25-22"></a>
<a id="__codelineno-25-23" name="__codelineno-25-23" href="#__codelineno-25-23"></a>
<a id="__codelineno-25-24" name="__codelineno-25-24" href="#__codelineno-25-24"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-25-25" name="__codelineno-25-25" href="#__codelineno-25-25"></a>    <span class="n">streaming</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="historical-nbbo-quotes">Historical NBBO Quotes</h2>
<p>This tutorial will provide examples for requesting historical &amp; intraday
<a href="https://www.investopedia.com/terms/n/nbbo.asp">NBBO(National Best Bid &amp; Offer)</a>
quotes.</p>
<h3 id="preface_1">Preface</h3>
<h4 id="the-interval_size-parameter">The <code>interval_size</code> parameter</h4>
<p>We provide tick-level data for <code>QUOTE</code> requests. This means that when a request is made,
every single quote inside the<code>date_range</code> provided will be returned. This can end up being 
millions of quotes per trading day. Specifying the<code>interval_size</code> parameter aggregates these
quotes and provides the NBBO at every <code>interval_size</code> milliseconds.</p>
<h4 id="be-careful">Be careful!</h4>
<p>Not specifying the <code>interval_size</code> will return tick-level data, which can be an obscene 
amount of data! If you plan to work with tick-level quote data, we recommend limiting 
your <code>date_range</code> (per-request) to 2 weeks for options and 1 day for stocks to prevent 
memory overflow errors. If you are using an <code>interval_size</code> &gt;= <code>60000</code>(1-min), 
you shouldn't need to do this.</p>
<h4 id="why-are-there-quotes-with-no-bid-or-ask">Why are there quotes with no bid or ask?</h4>
<p>You'll notice that the first few quotes of the day may have empty bid and or ask and prices.
These are test quotes usually sent by exchanges or
<a href="https://www.investopedia.com/terms/n/national-market-system-plan.asp">SIPs</a>. It's safe
to ignore them. We maintain a policy of not filtering any data unless the user asks us to,
which is why they are included in tick-level requests.</p>
<h3 id="stock-quotes">Stock Quotes</h3>
<h4 id="tick-level-nbbo-quotes">Tick-level NBBO quotes</h4>
<p>The example below returns every NBBO quote that occurred on <code>2022-11-18</code> for <code>AMD</code> stock.
As seen in the output, there are over <strong>5.8 million</strong> quotes for this day alone, which is
why we recommend using a <code>date_range</code> of 1 for these requests.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="15:2"><input checked="checked" id="__tabbed_15_1" name="__tabbed_15" type="radio" /><input id="__tabbed_15_2" name="__tabbed_15" type="radio" /><div class="tabbed-labels"><label for="__tabbed_15_1">quote.py</label><label for="__tabbed_15_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="kn">from</span> <span class="nn">thetadata</span> <span class="kn">import</span> <span class="n">ThetaClient</span><span class="p">,</span> <span class="n">DateRange</span><span class="p">,</span> <span class="n">StockReqType</span>
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="k">def</span> <span class="nf">quote</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>    <span class="c1"># Credentials now required because get_last is only available to ThetaData subscribers.</span>
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a>    <span class="n">client</span> <span class="o">=</span> <span class="n">ThetaClient</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;MyThetaDataEmail&quot;</span><span class="p">,</span> <span class="n">passwd</span><span class="o">=</span><span class="s2">&quot;MyThetaDataPassword&quot;</span><span class="p">)</span>
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a>
<a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a>    <span class="c1"># Make any requests for data inside this block. Requests made outside this block won&#39;t run.</span>
<a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a>    <span class="k">with</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">():</span>
<a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a>        <span class="n">out</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_hist_stock</span><span class="p">(</span>
<a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a>            <span class="n">req</span><span class="o">=</span><span class="n">StockReqType</span><span class="o">.</span><span class="n">QUOTE</span><span class="p">,</span>
<a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a>            <span class="n">root</span><span class="o">=</span><span class="s2">&quot;AMD&quot;</span><span class="p">,</span>
<a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a>            <span class="n">date_range</span><span class="o">=</span><span class="n">DateRange</span><span class="p">(</span><span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">18</span><span class="p">),</span> <span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">18</span><span class="p">)),</span>
<a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a>        <span class="p">)</span>
<a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a>
<a id="__codelineno-26-18" name="__codelineno-26-18" href="#__codelineno-26-18"></a>    <span class="c1"># We are out of the client.connect() block, so we can no longer make requests.</span>
<a id="__codelineno-26-19" name="__codelineno-26-19" href="#__codelineno-26-19"></a>    <span class="k">return</span> <span class="n">out</span>
<a id="__codelineno-26-20" name="__codelineno-26-20" href="#__codelineno-26-20"></a>
<a id="__codelineno-26-21" name="__codelineno-26-21" href="#__codelineno-26-21"></a>
<a id="__codelineno-26-22" name="__codelineno-26-22" href="#__codelineno-26-22"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-26-23" name="__codelineno-26-23" href="#__codelineno-26-23"></a>    <span class="n">data</span> <span class="o">=</span> <span class="n">quote</span><span class="p">()</span>
<a id="__codelineno-26-24" name="__codelineno-26-24" href="#__codelineno-26-24"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">max_rows</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">max_cols</span><span class="o">=</span><span class="mi">16</span><span class="p">))</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>&gt;<span class="w"> </span>python<span class="w"> </span>docs/stocks/quote_tick.py<span class="w">                                                                                                                                                                     </span>
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="w">         </span>DataType.MS_OF_DAY<span class="w">  </span>DataType.BID_SIZE<span class="w">  </span>DataType.BID_CONDITION<span class="w">  </span>DataType.BID<span class="w">  </span>DataType.BID_EXCHANGE<span class="w">  </span>DataType.ASK_SIZE<span class="w">  </span>DataType.ASK_CONDITION<span class="w">  </span>DataType.ASK<span class="w">  </span>DataType.ASK_EXCHANGE<span class="w"> </span>DataType.DATE
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="m">0</span><span class="w">                  </span><span class="m">14340012</span><span class="w">                  </span><span class="m">0</span><span class="w">                       </span><span class="m">0</span><span class="w">          </span><span class="m">0</span>.00<span class="w">                      </span><span class="m">0</span><span class="w">                  </span><span class="m">0</span><span class="w">                       </span><span class="m">0</span><span class="w">          </span><span class="m">0</span>.00<span class="w">                      </span><span class="m">0</span><span class="w">    </span><span class="m">2022</span>-11-18
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="m">1</span><span class="w">                  </span><span class="m">14340126</span><span class="w">                  </span><span class="m">0</span><span class="w">                       </span><span class="m">0</span><span class="w">          </span><span class="m">0</span>.00<span class="w">                      </span><span class="m">0</span><span class="w">                  </span><span class="m">0</span><span class="w">                       </span><span class="m">0</span><span class="w">          </span><span class="m">0</span>.00<span class="w">                      </span><span class="m">0</span><span class="w">    </span><span class="m">2022</span>-11-18
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="m">2</span><span class="w">                  </span><span class="m">14400005</span><span class="w">                  </span><span class="m">4</span><span class="w">                       </span><span class="m">1</span><span class="w">         </span><span class="m">74</span>.11<span class="w">                      </span><span class="m">0</span><span class="w">                  </span><span class="m">0</span><span class="w">                       </span><span class="m">0</span><span class="w">          </span><span class="m">0</span>.00<span class="w">                      </span><span class="m">0</span><span class="w">    </span><span class="m">2022</span>-11-18
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="m">3</span><span class="w">                  </span><span class="m">14400005</span><span class="w">                  </span><span class="m">4</span><span class="w">                       </span><span class="m">1</span><span class="w">         </span><span class="m">74</span>.11<span class="w">                      </span><span class="m">0</span><span class="w">                  </span><span class="m">4</span><span class="w">                       </span><span class="m">1</span><span class="w">         </span><span class="m">74</span>.68<span class="w">                      </span><span class="m">0</span><span class="w">    </span><span class="m">2022</span>-11-18
<a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a>...<span class="w">                     </span>...<span class="w">                </span>...<span class="w">                     </span>...<span class="w">           </span>...<span class="w">                    </span>...<span class="w">                </span>...<span class="w">                     </span>...<span class="w">           </span>...<span class="w">                    </span>...<span class="w">           </span>...
<a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a><span class="m">5894898</span><span class="w">            </span><span class="m">71998825</span><span class="w">                  </span><span class="m">8</span><span class="w">                      </span><span class="m">65</span><span class="w">         </span><span class="m">73</span>.58<span class="w">                      </span><span class="m">0</span><span class="w">                  </span><span class="m">1</span><span class="w">                       </span><span class="m">7</span><span class="w">         </span><span class="m">73</span>.58<span class="w">                      </span><span class="m">0</span><span class="w">    </span><span class="m">2022</span>-11-18
<a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a><span class="m">5894899</span><span class="w">            </span><span class="m">71998826</span><span class="w">                  </span><span class="m">8</span><span class="w">                      </span><span class="m">65</span><span class="w">         </span><span class="m">73</span>.58<span class="w">                      </span><span class="m">0</span><span class="w">                  </span><span class="m">6</span><span class="w">                       </span><span class="m">7</span><span class="w">         </span><span class="m">73</span>.60<span class="w">                      </span><span class="m">0</span><span class="w">    </span><span class="m">2022</span>-11-18
<a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a><span class="m">5894900</span><span class="w">            </span><span class="m">71998827</span><span class="w">                  </span><span class="m">8</span><span class="w">                      </span><span class="m">65</span><span class="w">         </span><span class="m">73</span>.58<span class="w">                      </span><span class="m">0</span><span class="w">                  </span><span class="m">6</span><span class="w">                       </span><span class="m">7</span><span class="w">         </span><span class="m">73</span>.60<span class="w">                      </span><span class="m">0</span><span class="w">    </span><span class="m">2022</span>-11-18
<a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a><span class="m">5894901</span><span class="w">            </span><span class="m">71998831</span><span class="w">                  </span><span class="m">8</span><span class="w">                      </span><span class="m">65</span><span class="w">         </span><span class="m">73</span>.59<span class="w">                      </span><span class="m">0</span><span class="w">                  </span><span class="m">6</span><span class="w">                       </span><span class="m">7</span><span class="w">         </span><span class="m">73</span>.60<span class="w">                      </span><span class="m">0</span><span class="w">    </span><span class="m">2022</span>-11-18
</code></pre></div>
</div>
</div>
</div>
<h4 id="1-minute-intervals-nbbo-quotes">1-minute intervals NBBO quotes</h4>
<p>The only difference from the example above is that we specify the <code>interval_size</code>
parameter, which allows us to get the NBBO quote every minute of the trading day.
This significantly reduces output and improves latency.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="16:2"><input checked="checked" id="__tabbed_16_1" name="__tabbed_16" type="radio" /><input id="__tabbed_16_2" name="__tabbed_16" type="radio" /><div class="tabbed-labels"><label for="__tabbed_16_1">quote.py</label><label for="__tabbed_16_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="kn">from</span> <span class="nn">thetadata</span> <span class="kn">import</span> <span class="n">ThetaClient</span><span class="p">,</span> <span class="n">DateRange</span><span class="p">,</span> <span class="n">StockReqType</span>
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="k">def</span> <span class="nf">quote</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a>    <span class="c1"># Credentials now required because get_last is only available to ThetaData subscribers.</span>
<a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a>    <span class="n">client</span> <span class="o">=</span> <span class="n">ThetaClient</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;MyThetaDataEmail&quot;</span><span class="p">,</span> <span class="n">passwd</span><span class="o">=</span><span class="s2">&quot;MyThetaDataPassword&quot;</span><span class="p">)</span>
<a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a>
<a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a>    <span class="c1"># Make any requests for data inside this block. Requests made outside this block won&#39;t run.</span>
<a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a>    <span class="k">with</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">():</span>
<a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a>        <span class="n">out</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_hist_stock</span><span class="p">(</span>
<a id="__codelineno-28-13" name="__codelineno-28-13" href="#__codelineno-28-13"></a>            <span class="n">req</span><span class="o">=</span><span class="n">StockReqType</span><span class="o">.</span><span class="n">QUOTE</span><span class="p">,</span>
<a id="__codelineno-28-14" name="__codelineno-28-14" href="#__codelineno-28-14"></a>            <span class="n">root</span><span class="o">=</span><span class="s2">&quot;AMD&quot;</span><span class="p">,</span>
<a id="__codelineno-28-15" name="__codelineno-28-15" href="#__codelineno-28-15"></a>            <span class="n">date_range</span><span class="o">=</span><span class="n">DateRange</span><span class="p">(</span><span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span> <span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">18</span><span class="p">)),</span>
<a id="__codelineno-28-16" name="__codelineno-28-16" href="#__codelineno-28-16"></a>            <span class="n">interval_size</span><span class="o">=</span><span class="mi">60_000</span>  <span class="c1"># 60_000ms = 1 minute</span>
<a id="__codelineno-28-17" name="__codelineno-28-17" href="#__codelineno-28-17"></a>        <span class="p">)</span>
<a id="__codelineno-28-18" name="__codelineno-28-18" href="#__codelineno-28-18"></a>
<a id="__codelineno-28-19" name="__codelineno-28-19" href="#__codelineno-28-19"></a>    <span class="c1"># We are out of the client.connect() block, so we can no longer make requests.</span>
<a id="__codelineno-28-20" name="__codelineno-28-20" href="#__codelineno-28-20"></a>    <span class="k">return</span> <span class="n">out</span>
<a id="__codelineno-28-21" name="__codelineno-28-21" href="#__codelineno-28-21"></a>
<a id="__codelineno-28-22" name="__codelineno-28-22" href="#__codelineno-28-22"></a>
<a id="__codelineno-28-23" name="__codelineno-28-23" href="#__codelineno-28-23"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-28-24" name="__codelineno-28-24" href="#__codelineno-28-24"></a>    <span class="n">data</span> <span class="o">=</span> <span class="n">quote</span><span class="p">()</span>
<a id="__codelineno-28-25" name="__codelineno-28-25" href="#__codelineno-28-25"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">max_rows</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">max_cols</span><span class="o">=</span><span class="mi">16</span><span class="p">))</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>&gt;<span class="w"> </span>python<span class="w"> </span>docs/stocks/quote_1min.py<span class="w">                                                                                                                                                                     </span>
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="w">      </span>DataType.MS_OF_DAY<span class="w">  </span>DataType.BID_SIZE<span class="w">  </span>DataType.BID_CONDITION<span class="w">  </span>DataType.BID<span class="w">  </span>DataType.BID_EXCHANGE<span class="w">  </span>DataType.ASK_SIZE<span class="w">  </span>DataType.ASK_CONDITION<span class="w">  </span>DataType.ASK<span class="w">  </span>DataType.ASK_EXCHANGE<span class="w"> </span>DataType.DATE
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="m">0</span><span class="w">               </span><span class="m">34200000</span><span class="w">                  </span><span class="m">2</span><span class="w">                      </span><span class="m">65</span><span class="w">         </span><span class="m">75</span>.23<span class="w">                      </span><span class="m">0</span><span class="w">                </span><span class="m">138</span><span class="w">                       </span><span class="m">1</span><span class="w">         </span><span class="m">75</span>.24<span class="w">                      </span><span class="m">0</span><span class="w">    </span><span class="m">2022</span>-11-14
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="m">1</span><span class="w">               </span><span class="m">34260000</span><span class="w">                  </span><span class="m">1</span><span class="w">                       </span><span class="m">1</span><span class="w">         </span><span class="m">74</span>.72<span class="w">                      </span><span class="m">0</span><span class="w">                  </span><span class="m">1</span><span class="w">                       </span><span class="m">1</span><span class="w">         </span><span class="m">74</span>.77<span class="w">                      </span><span class="m">0</span><span class="w">    </span><span class="m">2022</span>-11-14
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="m">2</span><span class="w">               </span><span class="m">34320000</span><span class="w">                  </span><span class="m">1</span><span class="w">                      </span><span class="m">65</span><span class="w">         </span><span class="m">74</span>.58<span class="w">                      </span><span class="m">0</span><span class="w">                  </span><span class="m">3</span><span class="w">                       </span><span class="m">7</span><span class="w">         </span><span class="m">74</span>.60<span class="w">                      </span><span class="m">0</span><span class="w">    </span><span class="m">2022</span>-11-14
<a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="m">3</span><span class="w">               </span><span class="m">34380000</span><span class="w">                  </span><span class="m">2</span><span class="w">                      </span><span class="m">17</span><span class="w">         </span><span class="m">73</span>.70<span class="w">                      </span><span class="m">0</span><span class="w">                  </span><span class="m">3</span><span class="w">                       </span><span class="m">7</span><span class="w">         </span><span class="m">73</span>.71<span class="w">                      </span><span class="m">0</span><span class="w">    </span><span class="m">2022</span>-11-14
<a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a>...<span class="w">                  </span>...<span class="w">                </span>...<span class="w">                     </span>...<span class="w">           </span>...<span class="w">                    </span>...<span class="w">                </span>...<span class="w">                     </span>...<span class="w">           </span>...<span class="w">                    </span>...<span class="w">           </span>...
<a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a><span class="m">1951</span><span class="w">            </span><span class="m">57420000</span><span class="w">                  </span><span class="m">5</span><span class="w">                       </span><span class="m">1</span><span class="w">         </span><span class="m">73</span>.50<span class="w">                      </span><span class="m">0</span><span class="w">                  </span><span class="m">6</span><span class="w">                      </span><span class="m">63</span><span class="w">         </span><span class="m">73</span>.51<span class="w">                      </span><span class="m">0</span><span class="w">    </span><span class="m">2022</span>-11-18
<a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a><span class="m">1952</span><span class="w">            </span><span class="m">57480000</span><span class="w">                  </span><span class="m">5</span><span class="w">                       </span><span class="m">3</span><span class="w">         </span><span class="m">73</span>.48<span class="w">                      </span><span class="m">0</span><span class="w">                 </span><span class="m">12</span><span class="w">                       </span><span class="m">3</span><span class="w">         </span><span class="m">73</span>.49<span class="w">                      </span><span class="m">0</span><span class="w">    </span><span class="m">2022</span>-11-18
<a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a><span class="m">1953</span><span class="w">            </span><span class="m">57540000</span><span class="w">                  </span><span class="m">7</span><span class="w">                       </span><span class="m">3</span><span class="w">         </span><span class="m">73</span>.53<span class="w">                      </span><span class="m">0</span><span class="w">                 </span><span class="m">11</span><span class="w">                       </span><span class="m">3</span><span class="w">         </span><span class="m">73</span>.54<span class="w">                      </span><span class="m">0</span><span class="w">    </span><span class="m">2022</span>-11-18
<a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a><span class="m">1954</span><span class="w">            </span><span class="m">57600000</span><span class="w">                </span><span class="m">209</span><span class="w">                       </span><span class="m">1</span><span class="w">         </span><span class="m">73</span>.58<span class="w">                      </span><span class="m">0</span><span class="w">                </span><span class="m">314</span><span class="w">                       </span><span class="m">1</span><span class="w">         </span><span class="m">73</span>.61<span class="w">                      </span><span class="m">0</span><span class="w">    </span><span class="m">2022</span>-11-18
</code></pre></div>
</div>
</div>
</div>
<h3 id="historical-option-quotes">Historical Option Quotes</h3>
<h4 id="tick-level-nbbo-quotes_1">Tick-level NBBO quotes</h4>
<p>The example below returns every NBBO quote that occurred between <code>2022-11-14</code> and
<code>2022-11-18</code> for the <code>$60 AMD CALL</code> that expires on <code>2022-12-16</code>. As seen in the 
output, there are almost <strong>1 million</strong> quotes for this week alone, which is why we
recommend using a <code>date_range</code> of 2 weeks or fewer for tick-level option requests.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="17:2"><input checked="checked" id="__tabbed_17_1" name="__tabbed_17" type="radio" /><input id="__tabbed_17_2" name="__tabbed_17" type="radio" /><div class="tabbed-labels"><label for="__tabbed_17_1">quote.py</label><label for="__tabbed_17_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="kn">from</span> <span class="nn">thetadata</span> <span class="kn">import</span> <span class="n">ThetaClient</span><span class="p">,</span> <span class="n">OptionRight</span><span class="p">,</span> <span class="n">DateRange</span><span class="p">,</span> <span class="n">OptionReqType</span>
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a><span class="k">def</span> <span class="nf">quote</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a>    <span class="c1"># Credentials now required because get_last is only available to ThetaData subscribers.</span>
<a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a>    <span class="n">client</span> <span class="o">=</span> <span class="n">ThetaClient</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;MyThetaDataEmail&quot;</span><span class="p">,</span> <span class="n">passwd</span><span class="o">=</span><span class="s2">&quot;MyThetaDataPassword&quot;</span><span class="p">)</span>
<a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a>
<a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a>    <span class="c1"># Make any requests for data inside this block. Requests made outside this block won&#39;t run.</span>
<a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a>    <span class="k">with</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">():</span>
<a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a>        <span class="n">out</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_hist_option</span><span class="p">(</span>
<a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a>            <span class="n">req</span><span class="o">=</span><span class="n">OptionReqType</span><span class="o">.</span><span class="n">QUOTE</span><span class="p">,</span>
<a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a>            <span class="n">root</span><span class="o">=</span><span class="s2">&quot;AMD&quot;</span><span class="p">,</span>
<a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a>            <span class="n">exp</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span>
<a id="__codelineno-30-16" name="__codelineno-30-16" href="#__codelineno-30-16"></a>            <span class="n">strike</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span>
<a id="__codelineno-30-17" name="__codelineno-30-17" href="#__codelineno-30-17"></a>            <span class="n">right</span><span class="o">=</span><span class="n">OptionRight</span><span class="o">.</span><span class="n">CALL</span><span class="p">,</span>
<a id="__codelineno-30-18" name="__codelineno-30-18" href="#__codelineno-30-18"></a>            <span class="n">date_range</span><span class="o">=</span><span class="n">DateRange</span><span class="p">(</span><span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span> <span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">18</span><span class="p">)),</span>
<a id="__codelineno-30-19" name="__codelineno-30-19" href="#__codelineno-30-19"></a>        <span class="p">)</span>
<a id="__codelineno-30-20" name="__codelineno-30-20" href="#__codelineno-30-20"></a>    <span class="c1"># We are out of the client.connect() block, so we can no longer make requests.</span>
<a id="__codelineno-30-21" name="__codelineno-30-21" href="#__codelineno-30-21"></a>    <span class="k">return</span> <span class="n">out</span>
<a id="__codelineno-30-22" name="__codelineno-30-22" href="#__codelineno-30-22"></a>
<a id="__codelineno-30-23" name="__codelineno-30-23" href="#__codelineno-30-23"></a>
<a id="__codelineno-30-24" name="__codelineno-30-24" href="#__codelineno-30-24"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-30-25" name="__codelineno-30-25" href="#__codelineno-30-25"></a>    <span class="n">data</span> <span class="o">=</span> <span class="n">quote</span><span class="p">()</span>
<a id="__codelineno-30-26" name="__codelineno-30-26" href="#__codelineno-30-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">max_rows</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">max_cols</span><span class="o">=</span><span class="mi">16</span><span class="p">))</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>&gt;<span class="w"> </span>python<span class="w"> </span>docs/stocks/quote_1min.py<span class="w">                                                                                                                                                                     </span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="w">    </span>DataType.MS_OF_DAY<span class="w">  </span>DataType.BID_SIZE<span class="w">  </span>DataType.BID_CONDITION<span class="w">  </span>DataType.BID<span class="w">  </span>DataType.BID_EXCHANGE<span class="w">  </span>DataType.ASK_SIZE<span class="w">  </span>DataType.ASK_CONDITION<span class="w">  </span>DataType.ASK<span class="w">  </span>DataType.ASK_EXCHANGE<span class="w"> </span>DataType.DATE
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="m">0</span><span class="w">                 </span><span class="m">28800107</span><span class="w">                  </span><span class="m">0</span><span class="w">                      </span><span class="m">65</span><span class="w">          </span><span class="m">0</span>.00<span class="w">                     </span><span class="m">50</span><span class="w">                  </span><span class="m">0</span><span class="w">                      </span><span class="m">65</span><span class="w">          </span><span class="m">0</span>.00<span class="w">                     </span><span class="m">50</span><span class="w">    </span><span class="m">2022</span>-11-14
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="m">1</span><span class="w">                 </span><span class="m">28801023</span><span class="w">                  </span><span class="m">0</span><span class="w">                       </span><span class="m">5</span><span class="w">          </span><span class="m">0</span>.00<span class="w">                     </span><span class="m">50</span><span class="w">                  </span><span class="m">0</span><span class="w">                       </span><span class="m">5</span><span class="w">          </span><span class="m">0</span>.00<span class="w">                     </span><span class="m">50</span><span class="w">    </span><span class="m">2022</span>-11-14
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="m">2</span><span class="w">                 </span><span class="m">28806116</span><span class="w">                  </span><span class="m">0</span><span class="w">                      </span><span class="m">42</span><span class="w">          </span><span class="m">0</span>.00<span class="w">                     </span><span class="m">50</span><span class="w">                  </span><span class="m">0</span><span class="w">                      </span><span class="m">42</span><span class="w">          </span><span class="m">0</span>.00<span class="w">                     </span><span class="m">50</span><span class="w">    </span><span class="m">2022</span>-11-14
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a><span class="m">3</span><span class="w">                 </span><span class="m">28806324</span><span class="w">                  </span><span class="m">0</span><span class="w">                      </span><span class="m">60</span><span class="w">          </span><span class="m">0</span>.00<span class="w">                     </span><span class="m">50</span><span class="w">                  </span><span class="m">0</span><span class="w">                      </span><span class="m">60</span><span class="w">          </span><span class="m">0</span>.00<span class="w">                     </span><span class="m">50</span><span class="w">    </span><span class="m">2022</span>-11-14
<a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a>...<span class="w">                    </span>...<span class="w">                </span>...<span class="w">                     </span>...<span class="w">           </span>...<span class="w">                    </span>...<span class="w">                </span>...<span class="w">                     </span>...<span class="w">           </span>...<span class="w">                    </span>...<span class="w">           </span>...
<a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a><span class="m">979528</span><span class="w">            </span><span class="m">57598756</span><span class="w">               </span><span class="m">1183</span><span class="w">                       </span><span class="m">9</span><span class="w">         </span><span class="m">14</span>.15<span class="w">                     </span><span class="m">50</span><span class="w">                 </span><span class="m">65</span><span class="w">                      </span><span class="m">11</span><span class="w">         </span><span class="m">14</span>.45<span class="w">                     </span><span class="m">50</span><span class="w">    </span><span class="m">2022</span>-11-18
<a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a><span class="m">979529</span><span class="w">            </span><span class="m">57599253</span><span class="w">               </span><span class="m">1132</span><span class="w">                       </span><span class="m">9</span><span class="w">         </span><span class="m">14</span>.15<span class="w">                     </span><span class="m">50</span><span class="w">                 </span><span class="m">65</span><span class="w">                      </span><span class="m">11</span><span class="w">         </span><span class="m">14</span>.45<span class="w">                     </span><span class="m">50</span><span class="w">    </span><span class="m">2022</span>-11-18
<a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a><span class="m">979530</span><span class="w">            </span><span class="m">57599264</span><span class="w">               </span><span class="m">1118</span><span class="w">                       </span><span class="m">9</span><span class="w">         </span><span class="m">14</span>.15<span class="w">                     </span><span class="m">50</span><span class="w">                 </span><span class="m">65</span><span class="w">                      </span><span class="m">11</span><span class="w">         </span><span class="m">14</span>.45<span class="w">                     </span><span class="m">50</span><span class="w">    </span><span class="m">2022</span>-11-18
<a id="__codelineno-31-11" name="__codelineno-31-11" href="#__codelineno-31-11"></a><span class="m">979531</span><span class="w">            </span><span class="m">57599539</span><span class="w">               </span><span class="m">1112</span><span class="w">                       </span><span class="m">9</span><span class="w">         </span><span class="m">14</span>.15<span class="w">                     </span><span class="m">50</span><span class="w">                 </span><span class="m">65</span><span class="w">                      </span><span class="m">11</span><span class="w">         </span><span class="m">14</span>.45<span class="w">                     </span><span class="m">50</span><span class="w">    </span><span class="m">2022</span>-11-18
</code></pre></div>
</div>
</div>
</div>
<h4 id="1-minute-intervals-nbbo-quotes_1">1-minute intervals NBBO quotes</h4>
<p>The only difference from the example above is that we specify the <code>interval_size</code>
parameter, which allows us to get the NBBO quote every minute of the trading day.
This significantly reduces output and improves latency.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="18:2"><input checked="checked" id="__tabbed_18_1" name="__tabbed_18" type="radio" /><input id="__tabbed_18_2" name="__tabbed_18" type="radio" /><div class="tabbed-labels"><label for="__tabbed_18_1">quote.py</label><label for="__tabbed_18_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="kn">from</span> <span class="nn">thetadata</span> <span class="kn">import</span> <span class="n">ThetaClient</span><span class="p">,</span> <span class="n">OptionRight</span><span class="p">,</span> <span class="n">DateRange</span><span class="p">,</span> <span class="n">OptionReqType</span>
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a>
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="k">def</span> <span class="nf">quote</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a>    <span class="c1"># Credentials now required because get_last is only available to ThetaData subscribers.</span>
<a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a>    <span class="n">client</span> <span class="o">=</span> <span class="n">ThetaClient</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;MyThetaDataEmail&quot;</span><span class="p">,</span> <span class="n">passwd</span><span class="o">=</span><span class="s2">&quot;MyThetaDataPassword&quot;</span><span class="p">)</span>
<a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a>
<a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a>    <span class="c1"># Make any requests for data inside this block. Requests made outside this block won&#39;t run.</span>
<a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a>    <span class="k">with</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">():</span>
<a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a>        <span class="n">out</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_hist_option</span><span class="p">(</span>
<a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a>            <span class="n">req</span><span class="o">=</span><span class="n">OptionReqType</span><span class="o">.</span><span class="n">QUOTE</span><span class="p">,</span>
<a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a>            <span class="n">root</span><span class="o">=</span><span class="s2">&quot;AMD&quot;</span><span class="p">,</span>
<a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a>            <span class="n">exp</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span>
<a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a>            <span class="n">strike</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span>
<a id="__codelineno-32-17" name="__codelineno-32-17" href="#__codelineno-32-17"></a>            <span class="n">right</span><span class="o">=</span><span class="n">OptionRight</span><span class="o">.</span><span class="n">CALL</span><span class="p">,</span>
<a id="__codelineno-32-18" name="__codelineno-32-18" href="#__codelineno-32-18"></a>            <span class="n">date_range</span><span class="o">=</span><span class="n">DateRange</span><span class="p">(</span><span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span> <span class="n">date</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">18</span><span class="p">)),</span>
<a id="__codelineno-32-19" name="__codelineno-32-19" href="#__codelineno-32-19"></a>            <span class="n">interval_size</span><span class="o">=</span><span class="mi">60_000</span>  <span class="c1"># 60_000ms = 1 minute</span>
<a id="__codelineno-32-20" name="__codelineno-32-20" href="#__codelineno-32-20"></a>        <span class="p">)</span>
<a id="__codelineno-32-21" name="__codelineno-32-21" href="#__codelineno-32-21"></a>    <span class="c1"># We are out of the client.connect() block, so we can no longer make requests.</span>
<a id="__codelineno-32-22" name="__codelineno-32-22" href="#__codelineno-32-22"></a>    <span class="k">return</span> <span class="n">out</span>
<a id="__codelineno-32-23" name="__codelineno-32-23" href="#__codelineno-32-23"></a>
<a id="__codelineno-32-24" name="__codelineno-32-24" href="#__codelineno-32-24"></a>
<a id="__codelineno-32-25" name="__codelineno-32-25" href="#__codelineno-32-25"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-32-26" name="__codelineno-32-26" href="#__codelineno-32-26"></a>    <span class="n">data</span> <span class="o">=</span> <span class="n">quote</span><span class="p">()</span>
<a id="__codelineno-32-27" name="__codelineno-32-27" href="#__codelineno-32-27"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">max_rows</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">max_cols</span><span class="o">=</span><span class="mi">16</span><span class="p">))</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">Bash</span><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>&gt;<span class="w"> </span>python<span class="w"> </span>docs/options/quote_1min.py<span class="w">                                                                                                                                                                        </span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="w">      </span>DataType.MS_OF_DAY<span class="w">  </span>DataType.BID_SIZE<span class="w">  </span>DataType.BID_CONDITION<span class="w">  </span>DataType.BID<span class="w">  </span>DataType.BID_EXCHANGE<span class="w">  </span>DataType.ASK_SIZE<span class="w">  </span>DataType.ASK_CONDITION<span class="w">  </span>DataType.ASK<span class="w">  </span>DataType.ASK_EXCHANGE<span class="w"> </span>DataType.DATE
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="m">0</span><span class="w">               </span><span class="m">34200000</span><span class="w">                  </span><span class="m">0</span><span class="w">                      </span><span class="m">47</span><span class="w">          </span><span class="m">0</span>.00<span class="w">                     </span><span class="m">50</span><span class="w">                  </span><span class="m">0</span><span class="w">                      </span><span class="m">47</span><span class="w">          </span><span class="m">0</span>.00<span class="w">                     </span><span class="m">50</span><span class="w">    </span><span class="m">2022</span>-11-14
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="m">1</span><span class="w">               </span><span class="m">34260000</span><span class="w">               </span><span class="m">1081</span><span class="w">                       </span><span class="m">9</span><span class="w">         </span><span class="m">15</span>.40<span class="w">                     </span><span class="m">50</span><span class="w">                </span><span class="m">188</span><span class="w">                      </span><span class="m">65</span><span class="w">         </span><span class="m">16</span>.15<span class="w">                     </span><span class="m">50</span><span class="w">    </span><span class="m">2022</span>-11-14
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="m">2</span><span class="w">               </span><span class="m">34320000</span><span class="w">                </span><span class="m">151</span><span class="w">                       </span><span class="m">6</span><span class="w">         </span><span class="m">15</span>.35<span class="w">                     </span><span class="m">50</span><span class="w">                 </span><span class="m">78</span><span class="w">                      </span><span class="m">11</span><span class="w">         </span><span class="m">15</span>.85<span class="w">                     </span><span class="m">50</span><span class="w">    </span><span class="m">2022</span>-11-14
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a><span class="m">3</span><span class="w">               </span><span class="m">34380000</span><span class="w">                 </span><span class="m">40</span><span class="w">                      </span><span class="m">43</span><span class="w">         </span><span class="m">14</span>.75<span class="w">                     </span><span class="m">50</span><span class="w">                </span><span class="m">138</span><span class="w">                      </span><span class="m">43</span><span class="w">         </span><span class="m">15</span>.10<span class="w">                     </span><span class="m">50</span><span class="w">    </span><span class="m">2022</span>-11-14
<a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a>...<span class="w">                  </span>...<span class="w">                </span>...<span class="w">                     </span>...<span class="w">           </span>...<span class="w">                    </span>...<span class="w">                </span>...<span class="w">                     </span>...<span class="w">           </span>...<span class="w">                    </span>...<span class="w">           </span>...
<a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a><span class="m">1946</span><span class="w">            </span><span class="m">57360000</span><span class="w">               </span><span class="m">2021</span><span class="w">                       </span><span class="m">9</span><span class="w">         </span><span class="m">14</span>.15<span class="w">                     </span><span class="m">50</span><span class="w">                 </span><span class="m">77</span><span class="w">                      </span><span class="m">43</span><span class="w">         </span><span class="m">14</span>.35<span class="w">                     </span><span class="m">50</span><span class="w">    </span><span class="m">2022</span>-11-18
<a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a><span class="m">1947</span><span class="w">            </span><span class="m">57420000</span><span class="w">               </span><span class="m">2056</span><span class="w">                       </span><span class="m">9</span><span class="w">         </span><span class="m">14</span>.15<span class="w">                     </span><span class="m">50</span><span class="w">                 </span><span class="m">39</span><span class="w">                      </span><span class="m">47</span><span class="w">         </span><span class="m">14</span>.35<span class="w">                     </span><span class="m">50</span><span class="w">    </span><span class="m">2022</span>-11-18
<a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a><span class="m">1948</span><span class="w">            </span><span class="m">57480000</span><span class="w">               </span><span class="m">2123</span><span class="w">                       </span><span class="m">9</span><span class="w">         </span><span class="m">14</span>.15<span class="w">                     </span><span class="m">50</span><span class="w">                 </span><span class="m">63</span><span class="w">                      </span><span class="m">11</span><span class="w">         </span><span class="m">14</span>.35<span class="w">                     </span><span class="m">50</span><span class="w">    </span><span class="m">2022</span>-11-18
<a id="__codelineno-33-11" name="__codelineno-33-11" href="#__codelineno-33-11"></a><span class="m">1949</span><span class="w">            </span><span class="m">57540000</span><span class="w">               </span><span class="m">1887</span><span class="w">                       </span><span class="m">9</span><span class="w">         </span><span class="m">14</span>.15<span class="w">                     </span><span class="m">50</span><span class="w">                 </span><span class="m">87</span><span class="w">                      </span><span class="m">11</span><span class="w">         </span><span class="m">14</span>.40<span class="w">                     </span><span class="m">50</span><span class="w">    </span><span class="m">2022</span>-11-18
</code></pre></div>
</div>
</div>
</div>
<h2 id="whats-next">What's next?</h2>
<p>Nice! You are now familiar the <code>Series</code> and <code>DataFrame</code> objects, the return types of our data requests.
Using the skills learned in this tutorial, you're well on your way to mastering the entire <code>thetadata</code> package.
Explore other requests at your disposal on the API Reference page!</p>
<p>For more details on the <code>pandas</code> API, please see the <a href="https://pandas.pydata.org/docs/user_guide/index.html">official pandas user guide</a>.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.51d95adb.min.js"></script>
      
    
  </body>
</html>